import{_ as N}from"./TXKbBkAF.js";import{e as P,f as V,A,x as F,B as L,v as O,c as r,a as o,b as $,w as j,t,i as s,j as g,F as k,k as b,q as m,o as c,n as q,_ as z}from"./Dfw7wMy2.js";import{u as D}from"./bTME_ylJ.js";import"./GJI3iByT.js";const E={class:"session-page"},G={class:"session-page__header"},M={class:"heading"},H={key:0,class:"session-page__content"},J={key:0,class:"game-over-banner card-game"},K={class:"heading"},Q={class:"game-over-banner__winner"},T={class:"leaderboard"},U={class:"section-title"},W={class:"leaderboard__list"},X={class:"leaderboard__rank"},Y={class:"leaderboard__name"},Z={class:"leaderboard__score score"},ss={class:"score-table"},es={class:"section-title"},os={class:"score-table__grid"},ns={class:"score-row__name"},ts={class:"score-row__input-wrapper"},as=["onClick"],rs=["value","onChange"],cs=["onClick"],is={class:"score-row__total"},ds={key:1,class:"session-page__loading"},_s=P({__name:"[id]",setup(us){const{t:_}=V(),R=A(),w=F(),{getSession:C,updatePlayerScore:h,addRound:x,sessions:S}=D(),u=m(()=>R.params.id),e=m(()=>C(u.value)),v=m(()=>e.value?[...e.value.players].sort((a,i)=>i.total-a.total):[]),f=m(()=>e.value?e.value.maxRounds&&e.value.currentRound>e.value.maxRounds?!0:e.value.maxScore?e.value.players.some(a=>a.total>=e.value.maxScore):!1:!1);function y(a,i,l){const n=l.target,d=parseInt(n.value)||0;h(u.value,a,i,d)}function B(){x(u.value)}function p(a,i){return e.value?.players.find(n=>n.id===a)?.scores[i-1]??0}function I(a){return a===0?"rank--first":a===1?"rank--second":a===2?"rank--third":""}return L(S,()=>{},{deep:!0}),O(()=>{e.value||w.push("/scores")}),(a,i)=>{const l=N;return c(),r("div",E,[o("header",G,[$(l,{to:"/scores",class:"session-page__back"},{default:j(()=>[...i[0]||(i[0]=[o("span",null,"←",-1)])]),_:1}),o("h1",M,t(s(e)?.name??""),1)]),s(e)?(c(),r("div",H,[s(f)?(c(),r("div",J,[o("h2",K,t(s(_)("scores.session.gameOver")),1),o("p",Q,t(s(_)("scores.session.winner",{name:s(v)[0]?.name})),1)])):g("",!0),o("div",T,[o("h2",U,t(s(_)("scores.session.leaderboard")),1),o("ul",W,[(c(!0),r(k,null,b(s(v),(n,d)=>(c(),r("li",{key:n.id,class:q(["leaderboard__item card-game",I(d)])},[o("span",X,t(d+1),1),o("span",Y,t(n.name),1),o("span",Z,t(n.total),1)],2))),128))])]),o("div",ss,[o("h2",es,t(s(_)("scores.round"))+" "+t(s(e).currentRound),1),o("div",os,[(c(!0),r(k,null,b(s(e).players,n=>(c(),r("div",{key:n.id,class:"score-row card-game"},[o("span",ns,t(n.name),1),o("div",ts,[o("button",{class:"score-row__btn",onClick:d=>s(h)(s(u),n.id,s(e).currentRound,p(n.id,s(e).currentRound)-1)}," − ",8,as),o("input",{type:"number",class:"score-row__input",value:p(n.id,s(e).currentRound),onChange:d=>y(n.id,s(e).currentRound,d)},null,40,rs),o("button",{class:"score-row__btn",onClick:d=>s(h)(s(u),n.id,s(e).currentRound,p(n.id,s(e).currentRound)+1)}," + ",8,cs)]),o("span",is,t(n.total),1)]))),128))])]),s(f)?g("",!0):(c(),r("button",{key:1,class:"btn-primary session-page__next-round",onClick:B},t(s(_)("scores.session.nextRound")),1))])):(c(),r("div",ds,[o("p",null,t(s(_)("common.loading")),1)]))])}}}),vs=z(_s,[["__scopeId","data-v-cd75018d"]]);export{vs as default};
