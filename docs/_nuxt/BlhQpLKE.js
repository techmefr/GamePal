import{g as T}from"./GJI3iByT.js";import{a as x}from"./Bpi5QSfC.js";import{A as O,r as f}from"./CFXXk92P.js";const r="gamepal-teams",a=f([]),d=f(!1);function P(){function s(){if(!d.value){if(typeof window<"u"){const i=localStorage.getItem(r);if(i)try{a.value=JSON.parse(i)}catch{a.value=[]}}d.value=!0}}function t(){typeof window<"u"&&localStorage.setItem(r,JSON.stringify(a.value))}function c(i,e){const n={id:T(),name:i.trim(),color:e??x(a.value.length),playerIds:[]};return a.value.push(n),t(),n}function u(i,e){const n=a.value.find(o=>o.id===i);n&&(e.name!==void 0&&(n.name=e.name.trim()),e.color!==void 0&&(n.color=e.color),e.playerIds!==void 0&&(n.playerIds=e.playerIds),t())}function m(i){const e=a.value.findIndex(n=>n.id===i);e!==-1&&(a.value.splice(e,1),t())}function v(i){return a.value.find(e=>e.id===i)??null}function p(i,e){const n=a.value.find(o=>o.id===i);if(n&&!n.playerIds.includes(e)){for(const o of a.value){const l=o.playerIds.indexOf(e);l!==-1&&o.playerIds.splice(l,1)}n.playerIds.push(e),t()}}function y(i,e){const n=a.value.find(o=>o.id===i);if(n){const o=n.playerIds.indexOf(e);o!==-1&&(n.playerIds.splice(o,1),t())}}function I(i){for(const e of a.value){const n=e.playerIds.indexOf(i);n!==-1&&e.playerIds.splice(n,1)}t()}function g(i){return a.value.find(e=>e.playerIds.includes(i))??null}return s(),{teams:O(a),addTeam:c,updateTeam:u,deleteTeam:m,getTeam:v,addPlayerToTeam:p,removePlayerFromTeam:y,removePlayerFromAllTeams:I,getPlayerTeam:g}}export{P as u};
