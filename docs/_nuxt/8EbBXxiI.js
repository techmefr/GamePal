import{_ as H}from"./BJaxSbV9.js";import{_ as X,X as Y}from"./D79L-dNd.js";import{_ as J}from"./BLGQa4DE.js";import{_ as Q}from"./2RxMe3I3.js";import{_ as W}from"./Ynnj7t__.js";import{_ as Z}from"./DaXXJcGT.js";import{i as ee,j as te,H as se,e as oe,c as r,a as n,m,p as V,w as _,d as g,t as i,h as e,b as c,C as w,F as z,s as A,q as P,G as ne,r as p,l as ae,o as a,y as T,z as N}from"./JU7iOayy.js";import{u as le}from"./9xaO-taL.js";import{u as ie}from"./CXkG_b36.js";import{A as re}from"./DVsceWOn.js";import{P as de}from"./CbHm8mcU.js";import"./Dn2euNds.js";import"./GJI3iByT.js";const ce={class:"min-h-dvh bg-background"},ue={class:"sticky top-0 z-10 bg-card/80 backdrop-blur-lg border-b border-border"},me={class:"flex items-center gap-4 px-4 py-4"},pe={class:"heading font-display text-lg font-bold tracking-tight",initial:{opacity:0,y:-10},enter:{opacity:1,y:0,transition:{delay:100}}},_e={class:"p-4 space-y-6"},fe={initial:{opacity:0,y:20},enter:{opacity:1,y:0,transition:{delay:200}}},ye={class:"text-xs font-semibold uppercase tracking-wider text-muted-foreground mb-2 block"},xe={initial:{opacity:0,y:20},enter:{opacity:1,y:0,transition:{delay:250}}},be={class:"text-xs font-semibold uppercase tracking-wider text-muted-foreground mb-2 block"},he={key:0,"data-test-id":"selected-players",class:"flex flex-wrap gap-2 mb-3"},ve=["onClick"],ge={class:"flex gap-2 mb-3"},we={key:1},ke={class:"text-xs text-muted-foreground mb-2"},Se={class:"flex flex-wrap gap-2"},Ce=["onClick"],Ve={key:2,class:"text-sm text-muted-foreground"},Pe={initial:{opacity:0,y:20},enter:{opacity:1,y:0,transition:{delay:300}}},Ne={class:"text-xs font-semibold uppercase tracking-wider text-muted-foreground mb-2 block"},Ue={initial:{opacity:0,y:20},enter:{opacity:1,y:0,transition:{delay:350}}},Be={class:"text-xs font-semibold uppercase tracking-wider text-muted-foreground mb-2 block"},Me={"data-test-id":"end-conditions",class:"grid grid-cols-2 gap-3"},Re={class:"text-sm text-muted-foreground block mb-2"},ze={class:"text-sm text-muted-foreground block mb-2"},Xe=ee({__name:"new",setup(Ae){const{t:l}=te(),j=se(),{players:x,addPlayer:D}=le(),{createSession:L}=ie(),f=p(""),d=p([]),y=p(""),b=p(null),h=p(null),k=p(!1),$=p(!1),E=N(()=>f.value.trim()!==""&&d.value.length>=2),S=N(()=>x.value.filter(o=>d.value.includes(o.id))),U=N(()=>x.value.filter(o=>!d.value.includes(o.id)));function F(o){const t=d.value.indexOf(o);t!==-1?d.value.splice(t,1):d.value.push(o)}function B(){const o=y.value.trim();if(o==="")return;const t=D(o);d.value.push(t.id),y.value=""}function I(o){const t=d.value.indexOf(o);t!==-1&&d.value.splice(t,1)}function K(){if(d.value.length<2)return;const o=S.value.map(C=>C.name),t=L(f.value.trim(),o,{maxRounds:b.value,maxScore:h.value,isTeamMode:k.value});j.push(`/scores/${t.id}`)}return oe(()=>{x.value.length>0&&($.value=!0)}),(o,t)=>{const C=H,v=X,O=J,M=Q,q=W,R=Z,u=ae("motion");return a(),r("div",ce,[n("header",ue,[n("div",me,[m((a(),V(C,{to:"/scores","data-test-id":"back-btn",class:"new-session__back flex h-10 w-10 items-center justify-center rounded-full text-muted-foreground transition-colors hover:bg-muted hover:text-foreground",initial:{opacity:0,x:-10},enter:{opacity:1,x:0}},{default:_(()=>[c(e(re),{class:"h-5 w-5"})]),_:1})),[[u]]),m((a(),r("h1",pe,[g(i(e(l)("scores.newSession.title")),1)])),[[u]])])]),n("div",_e,[m((a(),r("section",fe,[n("label",ye,i(e(l)("scores.newSession.sessionName")),1),c(v,{modelValue:e(f),"onUpdate:modelValue":t[0]||(t[0]=s=>w(f)?f.value=s:null),"data-test-id":"session-name-input",placeholder:e(l)("scores.newSession.sessionNamePlaceholder")},null,8,["modelValue","placeholder"])])),[[u]]),m((a(),r("section",xe,[n("label",be,i(e(l)("scores.newSession.players"))+" ("+i(e(d).length)+") ",1),e(S).length>0?(a(),r("div",he,[(a(!0),r(z,null,A(e(S),s=>(a(),V(O,{key:s.id,"data-test-class":"selected-player",class:"selected-player flex items-center gap-1 pr-1",style:T({backgroundColor:s.color})},{default:_(()=>[g(i(s.name)+" ",1),n("button",{"data-test-class":"remove-player-btn",class:"ml-1 hover:bg-white/20 rounded-full p-0.5",onClick:G=>I(s.id)},[c(e(Y),{class:"h-3 w-3"})],8,ve)]),_:2},1032,["style"]))),128))])):P("",!0),n("div",ge,[c(v,{modelValue:e(y),"onUpdate:modelValue":t[1]||(t[1]=s=>w(y)?y.value=s:null),"data-test-id":"new-player-input",class:"flex-1",placeholder:e(l)("scores.newSession.newPlayerPlaceholder"),onKeyup:ne(B,["enter"])},null,8,["modelValue","placeholder"]),c(M,{"data-test-id":"add-player-btn",onClick:B},{default:_(()=>[c(e(de),{class:"h-4 w-4"})]),_:1})]),e(U).length>0?(a(),r("div",we,[n("p",ke,i(e(l)("scores.newSession.selectExisting")),1),n("div",Se,[(a(!0),r(z,null,A(e(U),s=>(a(),r("button",{key:s.id,class:"available-player flex items-center gap-2 px-3 py-1.5 rounded-full border border-border text-sm transition-colors hover:border-primary hover:bg-primary/10",onClick:G=>F(s.id)},[n("span",{class:"w-5 h-5 rounded-full flex items-center justify-center text-white text-xs font-bold",style:T({backgroundColor:s.color})},i(s.name.charAt(0).toUpperCase()),5),g(" "+i(s.name),1)],8,Ce))),128))])])):P("",!0),e(x).length===0?(a(),r("p",Ve,i(e(l)("scores.newSession.noPlayersYet")),1)):P("",!0)])),[[u]]),m((a(),r("section",Pe,[n("label",Ne,i(e(l)("scores.newSession.gameMode")),1),c(q,{tabs:[{value:"individual",label:e(l)("scores.newSession.individual")},{value:"teams",label:e(l)("scores.newSession.teams")}],"model-value":e(k)?"teams":"individual","test-id":"game-mode","onUpdate:modelValue":t[2]||(t[2]=s=>k.value=s==="teams")},null,8,["tabs","model-value"])])),[[u]]),m((a(),r("section",Ue,[n("label",Be,i(e(l)("scores.newSession.endCondition")),1),n("div",Me,[c(R,{"data-test-id":"max-rounds-card",class:"end-condition p-3"},{default:_(()=>[n("span",Re,i(e(l)("scores.newSession.maxRounds")),1),c(v,{modelValue:e(b),"onUpdate:modelValue":t[3]||(t[3]=s=>w(b)?b.value=s:null),modelModifiers:{number:!0},"data-test-id":"max-rounds-input",type:"number",class:"text-center",min:"1",placeholder:"--"},null,8,["modelValue"])]),_:1}),c(R,{"data-test-id":"max-score-card",class:"end-condition p-3"},{default:_(()=>[n("span",ze,i(e(l)("scores.newSession.targetScore")),1),c(v,{modelValue:e(h),"onUpdate:modelValue":t[4]||(t[4]=s=>w(h)?h.value=s:null),modelModifiers:{number:!0},"data-test-id":"max-score-input",type:"number",class:"text-center",min:"1",placeholder:"--"},null,8,["modelValue"])]),_:1})])])),[[u]]),m((a(),V(M,{"data-test-id":"create-btn",class:"create-btn w-full mt-6",size:"lg",disabled:!e(E),initial:{opacity:0,y:20},enter:{opacity:1,y:0,transition:{delay:400}},onClick:K},{default:_(()=>[g(i(e(l)("scores.newSession.create")),1)]),_:1},8,["disabled"])),[[u]])])])}}});export{Xe as default};
