import{_ as Ie}from"./TXKbBkAF.js";import{P as Z,X as U,_ as Pe,a as Fe,b as Ve,c as $e,s as ze}from"./kXrY6zLn.js";import{A as Me,_ as Te}from"./CtbDvCpr.js";import{c as A,_ as Ue}from"./ROwC7uvM.js";import{_ as Le}from"./DraaGr1t.js";import{e as Ne,f as Se,r as je,o as n,c as r,a as o,g as k,h as x,w as f,b as d,i as e,d as D,t as c,j as P,F as y,k as g,l as Be,n as T,m as ee,p as V,q as te}from"./Dfw7wMy2.js";import{u as se}from"./DKf7lokl.js";import{g as L}from"./GJI3iByT.js";import{T as Ee}from"./Bhx489QM.js";const E=A("dices",[["rect",{width:"12",height:"12",x:"2",y:"10",rx:"2",ry:"2",key:"6agr2n"}],["path",{d:"m17.92 14 3.5-3.5a2.24 2.24 0 0 0 0-3l-5-4.92a2.24 2.24 0 0 0-3 0L10 6",key:"1o487t"}],["path",{d:"M6 18h.01",key:"uhywen"}],["path",{d:"M10 14h.01",key:"ssrbsk"}],["path",{d:"M15 6h.01",key:"cblpky"}],["path",{d:"M18 9h.01",key:"2061c0"}]]);const oe=A("package",[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]]);const Ae=A("pencil",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]]),Oe={class:"min-h-dvh bg-background"},Re={class:"sticky top-0 z-10 bg-card/80 backdrop-blur-lg border-b border-border"},qe={class:"flex items-center gap-4 px-4 py-4"},Xe={class:"heading flex-1 font-display text-lg font-bold tracking-tight",initial:{opacity:0,y:-10},enter:{opacity:1,y:0,transition:{delay:100}}},Je={class:"flex gap-2"},Ye={key:0,class:"p-4 space-y-6"},Ge={initial:{opacity:0,y:20},enter:{opacity:1,y:0,transition:{delay:200}}},He={class:"text-xs font-semibold uppercase tracking-wider text-muted-foreground mb-3"},Ke={class:"grid grid-cols-4 gap-2"},Qe={class:"font-display text-base font-semibold text-primary"},We={initial:{opacity:0,y:20},enter:{opacity:1,y:0,transition:{delay:250}}},Ze={class:"flex items-center justify-between mb-3"},et={class:"text-xs font-semibold uppercase tracking-wider text-muted-foreground"},tt={key:0,class:"grid grid-cols-2 gap-2"},st={class:"flex items-center gap-2"},ot=["onClick"],at={class:"font-medium text-foreground"},nt={class:"text-xs text-muted-foreground"},ct=["onClick"],lt={key:0,initial:{opacity:0,y:20},enter:{opacity:1,y:0,transition:{delay:300}}},it={class:"text-xs font-semibold uppercase tracking-wider text-muted-foreground mb-3"},rt={class:"grid grid-cols-3 sm:grid-cols-4 gap-3"},dt={class:"text-xs text-muted-foreground uppercase"},ut={class:"die-value block font-display text-2xl font-bold text-accent mt-1"},mt=["onClick"],ft={class:"text-xs text-muted-foreground truncate block"},pt=["onClick"],_t={class:"text-muted-foreground"},vt={class:"font-display text-2xl font-bold text-accent"},ht={key:1,class:"dice-empty text-center text-muted-foreground py-12",initial:{opacity:0},enter:{opacity:1,transition:{delay:300}}},xt={key:1,class:"p-4 space-y-6"},yt={initial:{opacity:0,y:20},enter:{opacity:1,y:0,transition:{delay:200}}},gt={class:"flex items-center justify-between mb-3"},bt={class:"text-xs font-semibold uppercase tracking-wider text-muted-foreground"},kt={key:0,class:"space-y-3"},Dt={class:"mb-3"},Ct={class:"font-semibold text-foreground"},wt={class:"flex flex-wrap gap-1 mt-2"},It={class:"flex gap-2 pt-3 border-t border-border"},Pt={key:1,class:"text-center py-12"},Ft={class:"text-muted-foreground mb-4"},Vt={key:2,class:"p-4 space-y-6"},$t={initial:{opacity:0,y:20},enter:{opacity:1,y:0,transition:{delay:100}}},zt={class:"text-lg font-semibold text-foreground mb-6"},Mt={class:"space-y-4"},Tt={class:"text-xs font-semibold uppercase tracking-wider text-muted-foreground mb-2 block"},Ut={class:"text-xs font-semibold uppercase tracking-wider text-muted-foreground mb-2 block"},Lt={class:"space-y-3"},Nt={class:"flex items-center gap-2 mb-3"},St=["onClick"],jt={class:"flex flex-wrap gap-1 mb-3"},Bt=["onClick"],Et={class:"flex flex-wrap gap-1"},At=["onClick"],Ot={key:3,class:"p-4 space-y-6"},Rt={initial:{opacity:0,y:20},enter:{opacity:1,y:0,transition:{delay:100}}},qt={class:"text-lg font-semibold text-foreground mb-6"},Xt={class:"space-y-4"},Jt={class:"text-xs font-semibold uppercase tracking-wider text-muted-foreground mb-2 block"},Yt={class:"text-xs font-semibold uppercase tracking-wider text-muted-foreground mb-2 block"},Gt={class:"grid grid-cols-4 gap-2"},Ht={class:"font-display text-sm font-semibold text-primary"},Kt={key:0,class:"flex items-center justify-center gap-1"},Qt={class:"text-sm text-foreground"},Wt=["onClick"],Zt={key:0},es={class:"text-xs font-semibold uppercase tracking-wider text-muted-foreground mb-2 block"},ts={class:"flex flex-wrap gap-2"},ss=["onClick"],fs=Ne({__name:"dice",setup(os){const{t:i}=Se(),O=[3,4,6,8,10,12,20,100],ae=["#818cf8","#f472b6","#34d399","#fbbf24","#f87171","#60a5fa","#a78bfa","#fb923c"],ne=["1","2","3","4","5","6","+","-","?","!","X","O","*","@","#","%","&","$"],v=V("roll"),w=V([]),F=V([]),$=V(!1),{data:C}=se("gamepal-custom-dice",[]),{data:z}=se("gamepal-dice-presets",[]),_=V({name:"",faces:[{value:"",color:null},{value:"",color:null}]}),u=V({name:"",standardDice:[],customDiceIds:[]}),M=V(null),ce=te(()=>w.value.reduce((s,l)=>s+(l.value??0),0)),N=te(()=>w.value.length>0||F.value.length>0);function R(a){const s={id:L(),type:a,value:null};w.value.push(s)}function le(a){const s=w.value.findIndex(l=>l.id===a);s!==-1&&w.value.splice(s,1)}function q(a){const s={id:L(),name:a.name,faces:[...a.faces],currentFaceIndex:null};F.value.push(s)}function ie(a){const s=F.value.findIndex(l=>l.id===a);s!==-1&&F.value.splice(s,1)}function X(){w.value=[],F.value=[]}function re(){if(!N.value)return;$.value=!0;let a=0;const s=10,l=ze(()=>{for(const p of w.value)p.value=Math.floor(Math.random()*p.type)+1;for(const p of F.value)p.currentFaceIndex=Math.floor(Math.random()*p.faces.length);a++,a>=s&&(clearInterval(l),$.value=!1)},80)}function J(a){return`D${a}`}function de(){_.value.faces.push({value:"",color:null})}function ue(a){_.value.faces.length>2&&_.value.faces.splice(a,1)}function me(a,s){_.value.faces[a].color=s}function fe(a,s){_.value.faces[a].value=s}function pe(){const a=_.value.name.trim();if(a===""||_.value.faces.some(l=>l.value.trim()===""))return;const s={id:L(),name:a,faces:_.value.faces.map(l=>({value:l.value.trim(),color:l.color})),currentFaceIndex:null};C.value.push(s),S(),v.value="roll"}function _e(a){const s=C.value.findIndex(l=>l.id===a);s!==-1&&C.value.splice(s,1)}function S(){_.value={name:"",faces:[{value:"",color:null},{value:"",color:null}]}}function ve(a){const s=u.value.standardDice.find(l=>l.type===a);s?s.count++:u.value.standardDice.push({type:a,count:1})}function he(a){const s=u.value.standardDice.findIndex(l=>l.type===a);if(s!==-1){const l=u.value.standardDice[s];l.count>1?l.count--:u.value.standardDice.splice(s,1)}}function xe(a){const s=u.value.customDiceIds.indexOf(a);s!==-1?u.value.customDiceIds.splice(s,1):u.value.customDiceIds.push(a)}function Y(a){return u.value.standardDice.find(l=>l.type===a)?.count??0}function ye(a){return u.value.customDiceIds.includes(a)}function ge(){const a=u.value.name.trim();if(a!==""&&!(u.value.standardDice.length===0&&u.value.customDiceIds.length===0)){if(M.value){const s=z.value.find(l=>l.id===M.value);s&&(s.name=a,s.standardDice=[...u.value.standardDice],s.customDice=u.value.customDiceIds.map(l=>C.value.find(p=>p.id===l)).filter(l=>l!==void 0))}else{const s={id:L(),name:a,standardDice:[...u.value.standardDice],customDice:u.value.customDiceIds.map(l=>C.value.find(p=>p.id===l)).filter(l=>l!==void 0)};z.value.push(s)}j(),v.value="presets"}}function be(a){M.value=a.id,u.value={name:a.name,standardDice:[...a.standardDice],customDiceIds:a.customDice.map(s=>s.id)},v.value="createPreset"}function ke(a){const s=z.value.findIndex(l=>l.id===a);s!==-1&&z.value.splice(s,1)}function De(a){X();for(const s of a.standardDice)for(let l=0;l<s.count;l++)R(s.type);for(const s of a.customDice)q(s);v.value="roll"}function j(){M.value=null,u.value={name:"",standardDice:[],customDiceIds:[]}}function G(){S(),v.value="createCustom"}function H(){j(),v.value="createPreset"}function Ce(){v.value="roll",S(),j()}return(a,s)=>{const l=Ie,p=Pe,K=Te,I=Ue,Q=Fe,W=Le,B=$e,b=je("motion");return n(),r("div",Oe,[o("header",Re,[o("div",qe,[k((n(),x(l,{to:"/",class:"dice-page__back flex h-10 w-10 items-center justify-center rounded-full text-muted-foreground transition-colors hover:bg-muted hover:text-foreground",initial:{opacity:0,x:-10},enter:{opacity:1,x:0}},{default:f(()=>[d(e(Me),{class:"h-5 w-5"})]),_:1})),[[b]]),k((n(),r("h1",Xe,[D(c(e(i)("dice.title")),1)])),[[b]]),o("div",Je,[e(v)==="roll"&&e(N)?(n(),x(p,{key:0,variant:"ghost",size:"sm",class:"dice-page__clear text-destructive hover:text-destructive",onClick:X},{default:f(()=>[D(c(e(i)("common.clear")),1)]),_:1})):P("",!0),e(v)!=="roll"?(n(),x(p,{key:1,variant:"ghost",size:"sm",class:"dice-page__cancel",onClick:Ce},{default:f(()=>[D(c(e(i)("common.cancel")),1)]),_:1})):P("",!0)])])]),e(v)==="roll"?(n(),r("div",Ye,[k(d(K,{tabs:[{value:"roll",label:e(i)("dice.roll"),icon:e(E)},{value:"presets",label:e(i)("dice.presets"),icon:e(oe)}],"model-value":"roll",initial:{opacity:0,y:10},enter:{opacity:1,y:0,transition:{delay:150}},"onUpdate:modelValue":s[0]||(s[0]=t=>v.value=t)},null,8,["tabs"]),[[b]]),k((n(),r("section",Ge,[o("h2",He,c(e(i)("dice.standardDice")),1),o("div",Ke,[(n(),r(y,null,g(O,t=>d(I,{key:t,hoverable:"",class:"dice-type-card p-3 cursor-pointer text-center",onClick:m=>R(t)},{default:f(()=>[o("span",Qe,c(J(t)),1)]),_:2},1032,["onClick"])),64))])])),[[b]]),k((n(),r("section",We,[o("div",Ze,[o("h2",et,c(e(i)("dice.customDice")),1),e(C).length>0?(n(),x(Q,{key:0,size:"sm",class:"custom-dice-add",onClick:G},{default:f(()=>[d(e(Z),{class:"h-4 w-4"})]),_:1})):P("",!0)]),e(C).length>0?(n(),r("div",tt,[(n(!0),r(y,null,g(e(C),t=>(n(),x(I,{key:t.id,hoverable:"",class:"custom-die-card p-3 cursor-pointer"},{default:f(()=>[o("div",st,[o("button",{class:"flex-1 text-left",onClick:m=>q(t)},[o("p",at,c(t.name),1),o("p",nt,c(t.faces.length)+" "+c(e(i)("dice.faces")),1)],8,ot),o("button",{class:"custom-die-card__delete p-1 text-muted-foreground hover:text-destructive transition-colors",onClick:Be(m=>_e(t.id),["stop"])},[d(e(U),{class:"h-4 w-4"})],8,ct)])]),_:2},1024))),128))])):(n(),r("button",{key:1,class:"create-custom-btn w-full p-4 border-2 border-dashed border-muted-foreground/30 rounded-lg text-muted-foreground text-sm hover:border-primary hover:text-primary transition-colors",onClick:G},c(e(i)("dice.createCustomDie")),1))])),[[b]]),e(N)?k((n(),r("section",lt,[o("h2",it,c(e(i)("dice.yourDice")),1),o("div",rt,[(n(!0),r(y,null,g(e(w),t=>(n(),x(I,{key:t.id,class:T(["die-in-tray relative p-3 text-center",{"animate-shake":e($)}])},{default:f(()=>[o("span",dt,c(J(t.type)),1),o("span",ut,c(t.value??"?"),1),o("button",{class:"die-remove absolute top-1 right-1 p-1 text-muted-foreground hover:text-destructive transition-colors",onClick:m=>le(t.id)},[d(e(U),{class:"h-3 w-3"})],8,mt)]),_:2},1032,["class"]))),128)),(n(!0),r(y,null,g(e(F),t=>(n(),x(I,{key:t.id,class:T(["die-in-tray die-in-tray--custom relative p-3 text-center",{"animate-shake":e($)}])},{default:f(()=>[o("span",ft,c(t.name),1),o("span",{class:"custom-face-value block font-display text-lg font-bold mt-1 px-2 py-1 rounded",style:ee({backgroundColor:t.currentFaceIndex!==null&&t.faces[t.currentFaceIndex].color?t.faces[t.currentFaceIndex].color:"hsl(var(--primary))",color:"#ffffff"})},c(t.currentFaceIndex!==null?t.faces[t.currentFaceIndex].value:"?"),5),o("button",{class:"die-remove absolute top-1 right-1 p-1 text-muted-foreground hover:text-destructive transition-colors",onClick:m=>ie(t.id)},[d(e(U),{class:"h-3 w-3"})],8,pt)]),_:2},1032,["class"]))),128))]),e(w).length>0?(n(),x(I,{key:0,class:"dice-total mt-4 p-4 flex items-center justify-between"},{default:f(()=>[o("span",_t,c(e(i)("dice.total")),1),o("span",vt,c(e(ce)),1)]),_:1})):P("",!0),d(p,{class:"roll-btn w-full mt-4",size:"lg",disabled:e($),onClick:re},{default:f(()=>[d(e(E),{class:"h-5 w-5 mr-2"}),D(" "+c(e($)?e(i)("dice.rolling"):e(i)("dice.roll")),1)]),_:1},8,["disabled"])])),[[b]]):k((n(),r("p",ht,[D(c(e(i)("dice.selectDice")),1)])),[[b]])])):e(v)==="presets"?(n(),r("div",xt,[k(d(K,{tabs:[{value:"roll",label:e(i)("dice.roll"),icon:e(E)},{value:"presets",label:e(i)("dice.presets"),icon:e(oe)}],"model-value":"presets",initial:{opacity:0,y:10},enter:{opacity:1,y:0,transition:{delay:150}},"onUpdate:modelValue":s[1]||(s[1]=t=>v.value=t)},null,8,["tabs"]),[[b]]),k((n(),r("section",yt,[o("div",gt,[o("h2",bt,c(e(i)("dice.yourPresets")),1),d(Q,{size:"sm",class:"presets-add",onClick:H},{default:f(()=>[d(e(Z),{class:"h-4 w-4"})]),_:1})]),e(z).length>0?(n(),r("div",kt,[(n(!0),r(y,null,g(e(z),t=>(n(),x(I,{key:t.id,class:"preset-card p-4"},{default:f(()=>[o("div",Dt,[o("p",Ct,c(t.name),1),o("div",wt,[(n(!0),r(y,null,g(t.standardDice,m=>(n(),x(W,{key:m.type,variant:"secondary"},{default:f(()=>[D(c(m.count)+"x D"+c(m.type),1)]),_:2},1024))),128)),(n(!0),r(y,null,g(t.customDice,m=>(n(),x(W,{key:m.id,variant:"default"},{default:f(()=>[D(c(m.name),1)]),_:2},1024))),128))])]),o("div",It,[d(p,{size:"sm",class:"preset-load flex-1",onClick:m=>De(t)},{default:f(()=>[d(e(Ve),{class:"h-4 w-4 mr-1"}),D(" "+c(e(i)("dice.load")),1)]),_:1},8,["onClick"]),d(p,{variant:"outline",size:"sm",class:"preset-edit",onClick:m=>be(t)},{default:f(()=>[d(e(Ae),{class:"h-4 w-4"})]),_:1},8,["onClick"]),d(p,{variant:"outline",size:"sm",class:"preset-delete text-destructive hover:text-destructive",onClick:m=>ke(t.id)},{default:f(()=>[d(e(Ee),{class:"h-4 w-4"})]),_:1},8,["onClick"])])]),_:2},1024))),128))])):(n(),r("div",Pt,[o("p",Ft,c(e(i)("dice.noPresets")),1),d(p,{variant:"outline",onClick:H},{default:f(()=>[D(c(e(i)("dice.createPreset")),1)]),_:1})]))])),[[b]])])):e(v)==="createCustom"?(n(),r("div",Vt,[k((n(),r("section",$t,[o("h2",zt,c(e(i)("dice.createCustomDie")),1),o("div",Mt,[o("div",null,[o("label",Tt,c(e(i)("dice.dieName")),1),d(B,{modelValue:e(_).name,"onUpdate:modelValue":s[2]||(s[2]=t=>e(_).name=t),placeholder:e(i)("dice.dieNamePlaceholder")},null,8,["modelValue","placeholder"])]),o("div",null,[o("label",Ut,c(e(i)("dice.faces"))+" ("+c(e(_).faces.length)+") ",1),o("div",Lt,[(n(!0),r(y,null,g(e(_).faces,(t,m)=>(n(),x(I,{key:m,class:"face-editor p-3"},{default:f(()=>[o("div",Nt,[d(B,{modelValue:t.value,"onUpdate:modelValue":h=>t.value=h,class:"face-input flex-1 text-center text-lg",placeholder:e(i)("dice.faceValue")},null,8,["modelValue","onUpdate:modelValue","placeholder"]),e(_).faces.length>2?(n(),r("button",{key:0,class:"face-remove p-2 text-muted-foreground hover:text-destructive transition-colors",onClick:h=>ue(m)},[d(e(U),{class:"h-4 w-4"})],8,St)):P("",!0)]),o("div",jt,[(n(),r(y,null,g(ne,h=>o("button",{key:h,class:T(["emoji-btn w-8 h-8 rounded text-sm flex items-center justify-center transition-all",t.value===h?"bg-primary text-primary-foreground":"bg-muted text-muted-foreground hover:bg-primary/20"]),onClick:we=>fe(m,h)},c(h),11,Bt)),64))]),o("div",Et,[(n(),r(y,null,g(ae,h=>o("button",{key:h,class:T(["color-btn w-6 h-6 rounded-full border-2 transition-transform",t.color===h?"border-white scale-110":"border-transparent"]),style:ee({backgroundColor:h}),onClick:we=>me(m,t.color===h?null:h)},null,14,At)),64))])]),_:2},1024))),128))]),o("button",{class:"add-face-btn w-full mt-3 p-3 border-2 border-dashed border-muted-foreground/30 rounded-lg text-muted-foreground text-sm hover:border-primary hover:text-primary transition-colors",onClick:de},c(e(i)("dice.addFace")),1)])]),d(p,{class:"save-custom-die w-full mt-6",disabled:!e(_).name.trim()||e(_).faces.some(t=>!t.value.trim()),onClick:pe},{default:f(()=>[D(c(e(i)("common.save")),1)]),_:1},8,["disabled"])])),[[b]])])):e(v)==="createPreset"?(n(),r("div",Ot,[k((n(),r("section",Rt,[o("h2",qt,c(e(M)?e(i)("dice.editPreset"):e(i)("dice.createPreset")),1),o("div",Xt,[o("div",null,[o("label",Jt,c(e(i)("dice.presetName")),1),d(B,{modelValue:e(u).name,"onUpdate:modelValue":s[3]||(s[3]=t=>e(u).name=t),placeholder:e(i)("dice.presetNamePlaceholder")},null,8,["modelValue","placeholder"])]),o("div",null,[o("label",Yt,c(e(i)("dice.standardDice")),1),o("div",Gt,[(n(),r(y,null,g(O,t=>o("div",{key:t,class:"text-center"},[d(I,{hoverable:"",class:"preset-die-btn p-2 cursor-pointer mb-1",onClick:m=>ve(t)},{default:f(()=>[o("span",Ht,"D"+c(t),1)]),_:2},1032,["onClick"]),Y(t)>0?(n(),r("div",Kt,[o("span",Qt,c(Y(t)),1),o("button",{class:"preset-die-remove w-5 h-5 rounded-full bg-destructive text-destructive-foreground text-xs flex items-center justify-center",onClick:m=>he(t)}," - ",8,Wt)])):P("",!0)])),64))])]),e(C).length>0?(n(),r("div",Zt,[o("label",es,c(e(i)("dice.customDice")),1),o("div",ts,[(n(!0),r(y,null,g(e(C),t=>(n(),r("button",{key:t.id,class:T(["preset-custom-btn px-3 py-2 rounded-lg text-sm transition-all",ye(t.id)?"bg-primary text-primary-foreground":"bg-muted text-muted-foreground border-2 border-transparent hover:border-primary"]),onClick:m=>xe(t.id)},c(t.name),11,ss))),128))])])):P("",!0)]),d(p,{class:"save-preset w-full mt-6",disabled:!e(u).name.trim()||e(u).standardDice.length===0&&e(u).customDiceIds.length===0,onClick:ge},{default:f(()=>[D(c(e(i)("common.save")),1)]),_:1},8,["disabled"])])),[[b]])])):P("",!0)])}}});export{fs as default};
