import{_ as $}from"./TXKbBkAF.js";import{e as F,f as B,x as L,v as T,c as _,a as e,b as z,w as D,t,i as s,j as k,g as b,y,z as w,F as I,k as j,n as C,p as c,o as p,q,_ as E}from"./Dfw7wMy2.js";import{u as A}from"./DKf7lokl.js";import{u as G}from"./bTME_ylJ.js";import"./GJI3iByT.js";const H={class:"new-session"},J={class:"new-session__header"},K={class:"heading"},O={class:"new-session__content"},Q={key:0,class:"saved-players-banner card-game"},W={class:"saved-players-banner__actions"},X={class:"form-group"},Y={class:"form-label"},Z=["placeholder"],ee={class:"form-group"},se={class:"form-label"},oe={class:"player-fields"},ne=["onUpdate:modelValue","placeholder"],te=["onClick"],ae={class:"form-group"},le={class:"form-label"},ie={class:"toggle-group"},re={class:"form-group"},ce={class:"form-label"},de={class:"end-condition"},ue={class:"end-condition__field"},me={class:"end-condition__field"},_e=["disabled"],pe=F({__name:"new",setup(ve){const{t:n}=B(),x=L(),{data:g}=A("gamepal-players",[]),{createSession:N}=G(),d=c(""),a=c(["",""]),v=c(null),f=c(null),u=c(!1),h=c(!1),P=q(()=>{const l=d.value.trim()!=="",o=a.value.filter(r=>r.trim()!=="");return l&&o.length>=2});function V(){a.value.push("")}function M(l){a.value.length>2&&a.value.splice(l,1)}function R(){g.value.length>0&&(a.value=g.value.map(l=>l.name),h.value=!1)}function U(){const l=a.value.map(r=>r.trim()).filter(r=>r!=="");if(l.length<2)return;const o=N(d.value.trim(),l,{maxRounds:v.value,maxScore:f.value,isTeamMode:u.value});x.push(`/scores/${o.id}`)}return T(()=>{g.value.length>0&&(h.value=!0)}),(l,o)=>{const r=$;return p(),_("div",H,[e("header",J,[z(r,{to:"/scores",class:"new-session__back"},{default:D(()=>[...o[6]||(o[6]=[e("span",null,"←",-1)])]),_:1}),e("h1",K,t(s(n)("scores.newSession.title")),1)]),e("div",O,[s(h)?(p(),_("div",Q,[e("p",null,t(s(n)("scores.newSession.useSavedPlayers")),1),e("div",W,[e("button",{class:"btn-primary",onClick:R},t(s(n)("scores.newSession.yes")),1),e("button",{class:"saved-players-banner__dismiss",onClick:o[0]||(o[0]=i=>h.value=!1)},t(s(n)("scores.newSession.no")),1)])])):k("",!0),e("div",X,[e("label",Y,t(s(n)("scores.newSession.sessionName")),1),b(e("input",{"onUpdate:modelValue":o[1]||(o[1]=i=>w(d)?d.value=i:null),type:"text",class:"form-input",placeholder:s(n)("scores.newSession.sessionNamePlaceholder")},null,8,Z),[[y,s(d)]])]),e("div",ee,[e("label",se,t(s(n)("scores.newSession.players")),1),e("div",oe,[(p(!0),_(I,null,j(s(a),(i,m)=>(p(),_("div",{key:m,class:"player-field"},[b(e("input",{"onUpdate:modelValue":S=>s(a)[m]=S,type:"text",class:"form-input",placeholder:s(n)("scores.newSession.playerPlaceholder",{n:m+1})},null,8,ne),[[y,s(a)[m]]]),s(a).length>2?(p(),_("button",{key:0,class:"player-field__remove",onClick:S=>M(m)}," × ",8,te)):k("",!0)]))),128))]),e("button",{class:"add-player-btn",onClick:V},t(s(n)("scores.newSession.addPlayer")),1)]),e("div",ae,[e("label",le,t(s(n)("scores.newSession.gameMode")),1),e("div",ie,[e("button",{class:C(["toggle-btn",{"toggle-btn--active":!s(u)}]),onClick:o[2]||(o[2]=i=>u.value=!1)},t(s(n)("scores.newSession.individual")),3),e("button",{class:C(["toggle-btn",{"toggle-btn--active":s(u)}]),onClick:o[3]||(o[3]=i=>u.value=!0)},t(s(n)("scores.newSession.teams")),3)])]),e("div",re,[e("label",ce,t(s(n)("scores.newSession.endCondition")),1),e("div",de,[e("div",ue,[e("span",null,t(s(n)("scores.newSession.maxRounds")),1),b(e("input",{"onUpdate:modelValue":o[4]||(o[4]=i=>w(v)?v.value=i:null),type:"number",class:"form-input form-input--small",min:"1",placeholder:"∞"},null,512),[[y,s(v),void 0,{number:!0}]])]),e("div",me,[e("span",null,t(s(n)("scores.newSession.targetScore")),1),b(e("input",{"onUpdate:modelValue":o[5]||(o[5]=i=>w(f)?f.value=i:null),type:"number",class:"form-input form-input--small",min:"1",placeholder:"∞"},null,512),[[y,s(f),void 0,{number:!0}]])])])]),e("button",{class:"btn-primary new-session__create",disabled:!s(P),onClick:U},t(s(n)("scores.newSession.create")),9,_e)])])}}}),we=E(pe,[["__scopeId","data-v-46af607d"]]);export{we as default};
