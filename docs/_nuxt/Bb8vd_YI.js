import{_ as _e}from"./BJaxSbV9.js";import{_ as pe}from"./DaXXJcGT.js";import{_ as ve,X as xe}from"./D79L-dNd.js";import{_ as he}from"./2RxMe3I3.js";import{_ as we}from"./BLGQa4DE.js";import{_ as ke}from"./DumIh84E.js";import{i as ge,j as Pe,c as y,a as t,b as a,w as n,t as o,h as e,q as v,x as Ce,p,F as g,s as S,r as x,l as Se,o as d,d as m,m as V,E as L,G as Ve,C as Ue,z as Y}from"./JU7iOayy.js";import{u as Fe,S as $e}from"./BMAV4WG4.js";import{A as ze}from"./DVsceWOn.js";import{D as Be}from"./BpmzpYBX.js";import{c as D}from"./Dn2euNds.js";import{P as J}from"./CbHm8mcU.js";import{U as Le}from"./D5j3hawC.js";import{P as De}from"./DOdQbC3U.js";import{T as Ge}from"./CZA0yL8h.js";import{H as Ae}from"./B5HQUr59.js";const je=D("chevron-down",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);const Oe=D("chevron-up",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);const Q=D("dollar-sign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]);const He=D("funnel",[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]]),Me={class:"min-h-dvh bg-background"},Ee={class:"sticky top-0 z-10 bg-card/80 backdrop-blur-lg border-b border-border"},Ne={class:"flex items-center gap-4 px-4 py-4"},Re={class:"heading flex-1 font-display text-lg font-bold tracking-tight"},Te={class:"p-4 space-y-4"},Ie={key:0,class:"space-y-2"},qe={class:"grid grid-cols-4 gap-2"},Ke={class:"text-2xl font-bold text-primary"},Xe={class:"text-xs text-muted-foreground block"},Ye={class:"text-2xl font-bold text-green-500"},Je={class:"text-xs text-muted-foreground block"},Qe={class:"text-2xl font-bold text-orange-500"},We={class:"text-xs text-muted-foreground block"},Ze={class:"text-2xl font-bold text-blue-500"},et={class:"text-xs text-muted-foreground block"},tt={class:"grid grid-cols-2 gap-2"},lt={class:"text-lg font-bold text-muted-foreground"},ot={class:"text-xs text-muted-foreground block"},st={class:"text-lg font-bold text-muted-foreground"},rt={class:"text-xs text-muted-foreground block"},at={class:"flex gap-2"},nt={class:"relative flex-1"},dt={class:"flex items-center justify-between"},it={class:"font-semibold"},ut={class:"grid grid-cols-2 gap-3"},ct={class:"text-xs text-muted-foreground block mb-1"},mt={value:null},ft=["value"],yt={class:"text-xs text-muted-foreground block mb-1"},bt={value:null},_t=["value"],pt={class:"grid grid-cols-2 gap-3"},vt={class:"text-xs text-muted-foreground block mb-1"},xt={class:"text-xs text-muted-foreground block mb-1"},ht={class:"flex flex-wrap gap-2"},wt={class:"flex items-center justify-between"},kt={class:"font-semibold"},gt={class:"grid grid-cols-2 gap-3"},Pt={class:"text-xs text-muted-foreground block mb-1"},Ct={class:"text-xs text-muted-foreground block mb-1"},St={class:"grid grid-cols-2 gap-3"},Vt={class:"text-xs text-muted-foreground block mb-1"},Ut=["value"],Ft={class:"text-xs text-muted-foreground block mb-1"},$t=["value"],zt={key:3,class:"game-list space-y-2"},Bt={class:"flex items-start gap-3"},Lt={class:"flex-1"},Dt={class:"font-semibold text-foreground"},Gt={class:"flex items-center gap-2 mt-1 text-sm text-muted-foreground"},At={key:0,class:"px-2 py-0.5 bg-muted rounded text-xs"},jt={class:"flex flex-wrap gap-1 mt-2"},Ot={class:"flex gap-1"},Ht={class:"flex flex-wrap gap-2 mt-3 pt-3 border-t border-border"},Mt={key:0,class:"mt-3 pt-3 border-t border-border"},Et={class:"text-sm font-medium mb-2"},Nt={class:"space-y-2"},Rt={class:"font-medium"},Tt={class:"text-muted-foreground"},It={key:1,class:"flex gap-2 mt-3 pt-3 border-t border-border"},qt={key:2,class:"flex items-center gap-2 mt-3 pt-3 border-t border-border"},Kt={class:"flex-1 text-sm text-muted-foreground"},Xt={key:4,class:"text-center py-12"},Yt={class:"text-muted-foreground mb-4"},Jt={key:5,class:"text-center text-muted-foreground py-8"},yl=ge({__name:"library",setup(Qt){const{t:s}=Pe(),{games:W,stats:h,addGame:Z,updateGame:ee,deleteGame:te,markAsBorrowed:j,markForSale:le,filterGames:oe,exportLibrary:se,getLoanHistory:O}=Fe(),H=["strategy","party","family","cooperative","card","dice","rpg","trivia"],M=["casual","competitive","relaxed","intense","funny","serious"],P=x(!1),U=x(!1),w=x(null),F=x(null),$=x(null),C=x(""),z=x(null),i=x({search:"",style:null,mood:null,minPlayers:null,maxPlayers:null,showOwned:!0,showBorrowed:!0,showForSale:!0}),c=x({name:"",minPlayers:2,maxPlayers:4,style:null,mood:null}),E=Y(()=>oe(i.value)),N=Y(()=>i.value.style!==null||i.value.mood!==null||i.value.minPlayers!==null||i.value.maxPlayers!==null||!i.value.showOwned||!i.value.showBorrowed||!i.value.showForSale);function re(){c.value.name.trim()!==""&&(Z({name:c.value.name.trim(),minPlayers:c.value.minPlayers,maxPlayers:c.value.maxPlayers,style:c.value.style,mood:c.value.mood,isOwned:!0,isBorrowed:!1,borrowedTo:null,forSale:!1}),R(),P.value=!1)}function R(){c.value={name:"",minPlayers:2,maxPlayers:4,style:null,mood:null}}function ae(u){w.value=u.id,c.value={name:u.name,minPlayers:u.minPlayers,maxPlayers:u.maxPlayers,style:u.style,mood:u.mood},P.value=!0}function ne(){w.value&&c.value.name.trim()&&ee(w.value,{name:c.value.name.trim(),minPlayers:c.value.minPlayers,maxPlayers:c.value.maxPlayers,style:c.value.style,mood:c.value.mood}),T()}function T(){w.value=null,R(),P.value=!1}function de(u){te(u),F.value=null}function I(u){C.value.trim()&&j(u,C.value.trim()),$.value=null,C.value=""}function ie(u){j(u,null)}function ue(u){le(u.id,!u.forSale)}function ce(){i.value={search:"",style:null,mood:null,minPlayers:null,maxPlayers:null,showOwned:!0,showBorrowed:!0,showForSale:!0}}function me(){const u=se(),r=new Blob([u],{type:"application/json"}),B=URL.createObjectURL(r),_=document.createElement("a");_.href=B,_.download="gamepal-library.json",_.click(),URL.revokeObjectURL(B)}function G(u){return s(`library.styles.${u}`)}function q(u){return s(`library.moods.${u}`)}function K(u){return new Date(u).toLocaleDateString()}function fe(u){z.value=z.value===u?null:u}return(u,r)=>{const B=_e,_=pe,k=ve,b=he,A=we,X=ke,ye=Se("motion");return d(),y("div",Me,[t("header",Ee,[t("div",Ne,[a(B,{to:"/",class:"library__back flex h-10 w-10 items-center justify-center rounded-full text-muted-foreground transition-colors hover:bg-muted hover:text-foreground"},{default:n(()=>[a(e(ze),{class:"h-5 w-5"})]),_:1}),t("h1",Re,o(e(s)("library.title")),1),t("button",{class:"flex h-10 w-10 items-center justify-center rounded-full text-muted-foreground transition-colors hover:bg-muted hover:text-foreground",onClick:me},[a(e(Be),{class:"h-5 w-5"})])])]),t("div",Te,[e(h).total>0?(d(),y("div",Ie,[t("div",qe,[a(_,{class:"stat-card p-3 text-center"},{default:n(()=>[t("span",Ke,o(e(h).total),1),t("span",Xe,o(e(s)("library.stats.total")),1)]),_:1}),a(_,{class:"stat-card p-3 text-center"},{default:n(()=>[t("span",Ye,o(e(h).owned),1),t("span",Je,o(e(s)("library.stats.owned")),1)]),_:1}),a(_,{class:"stat-card p-3 text-center"},{default:n(()=>[t("span",Qe,o(e(h).borrowed),1),t("span",We,o(e(s)("library.stats.borrowed")),1)]),_:1}),a(_,{class:"stat-card p-3 text-center"},{default:n(()=>[t("span",Ze,o(e(h).forSale),1),t("span",et,o(e(s)("library.stats.forSale")),1)]),_:1})]),t("div",tt,[a(_,{class:"stat-card p-3 text-center"},{default:n(()=>[t("span",lt,o(e(h).minPlayers)+"-"+o(e(h).maxPlayers),1),t("span",ot,o(e(s)("library.stats.playerRange")),1)]),_:1}),a(_,{class:"stat-card p-3 text-center"},{default:n(()=>[t("span",st,o(e(h).totalLoans),1),t("span",rt,o(e(s)("library.stats.totalLoans")),1)]),_:1})])])):v("",!0),t("div",at,[t("div",nt,[a(e($e),{class:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground"}),a(k,{modelValue:e(i).search,"onUpdate:modelValue":r[0]||(r[0]=l=>e(i).search=l),placeholder:e(s)("library.search"),class:"pl-10"},null,8,["modelValue","placeholder"])]),a(b,{variant:"outline",class:Ce({"bg-primary text-primary-foreground":e(U)||e(N)}),onClick:r[1]||(r[1]=l=>U.value=!e(U))},{default:n(()=>[a(e(He),{class:"h-4 w-4"})]),_:1},8,["class"]),a(b,{onClick:r[2]||(r[2]=l=>P.value=!0)},{default:n(()=>[a(e(J),{class:"h-4 w-4"})]),_:1})]),e(U)?(d(),p(_,{key:1,class:"filters p-4 space-y-4"},{default:n(()=>[t("div",dt,[t("h3",it,o(e(s)("library.filters")),1),e(N)?(d(),p(b,{key:0,variant:"ghost",size:"sm",onClick:ce},{default:n(()=>[m(o(e(s)("library.clearFilters")),1)]),_:1})):v("",!0)]),t("div",ut,[t("div",null,[t("label",ct,o(e(s)("library.style")),1),V(t("select",{"onUpdate:modelValue":r[3]||(r[3]=l=>e(i).style=l),class:"w-full h-9 px-3 rounded-md border border-border bg-background text-sm"},[t("option",mt,o(e(s)("library.all")),1),(d(),y(g,null,S(H,l=>t("option",{key:l,value:l},o(G(l)),9,ft)),64))],512),[[L,e(i).style]])]),t("div",null,[t("label",yt,o(e(s)("library.mood")),1),V(t("select",{"onUpdate:modelValue":r[4]||(r[4]=l=>e(i).mood=l),class:"w-full h-9 px-3 rounded-md border border-border bg-background text-sm"},[t("option",bt,o(e(s)("library.all")),1),(d(),y(g,null,S(M,l=>t("option",{key:l,value:l},o(q(l)),9,_t)),64))],512),[[L,e(i).mood]])])]),t("div",pt,[t("div",null,[t("label",vt,o(e(s)("library.minPlayers")),1),a(k,{modelValue:e(i).minPlayers,"onUpdate:modelValue":r[5]||(r[5]=l=>e(i).minPlayers=l),modelModifiers:{number:!0},type:"number",min:"1",placeholder:"--"},null,8,["modelValue"])]),t("div",null,[t("label",xt,o(e(s)("library.maxPlayers")),1),a(k,{modelValue:e(i).maxPlayers,"onUpdate:modelValue":r[6]||(r[6]=l=>e(i).maxPlayers=l),modelModifiers:{number:!0},type:"number",min:"1",placeholder:"--"},null,8,["modelValue"])])]),t("div",ht,[a(b,{variant:e(i).showOwned?"default":"outline",size:"sm",onClick:r[7]||(r[7]=l=>e(i).showOwned=!e(i).showOwned)},{default:n(()=>[m(o(e(s)("library.owned")),1)]),_:1},8,["variant"]),a(b,{variant:e(i).showBorrowed?"default":"outline",size:"sm",onClick:r[8]||(r[8]=l=>e(i).showBorrowed=!e(i).showBorrowed)},{default:n(()=>[m(o(e(s)("library.borrowed")),1)]),_:1},8,["variant"]),a(b,{variant:e(i).showForSale?"default":"outline",size:"sm",onClick:r[9]||(r[9]=l=>e(i).showForSale=!e(i).showForSale)},{default:n(()=>[m(o(e(s)("library.forSale")),1)]),_:1},8,["variant"])])]),_:1})):v("",!0),e(P)?(d(),p(_,{key:2,class:"add-form p-4 space-y-4"},{default:n(()=>[t("div",wt,[t("h3",kt,o(e(w)?e(s)("library.editGame"):e(s)("library.addGame")),1),t("button",{class:"text-muted-foreground hover:text-foreground",onClick:T},[a(e(xe),{class:"h-5 w-5"})])]),a(k,{modelValue:e(c).name,"onUpdate:modelValue":r[10]||(r[10]=l=>e(c).name=l),placeholder:e(s)("library.gameName")},null,8,["modelValue","placeholder"]),t("div",gt,[t("div",null,[t("label",Pt,o(e(s)("library.minPlayers")),1),a(k,{modelValue:e(c).minPlayers,"onUpdate:modelValue":r[11]||(r[11]=l=>e(c).minPlayers=l),modelModifiers:{number:!0},type:"number",min:"1"},null,8,["modelValue"])]),t("div",null,[t("label",Ct,o(e(s)("library.maxPlayers")),1),a(k,{modelValue:e(c).maxPlayers,"onUpdate:modelValue":r[12]||(r[12]=l=>e(c).maxPlayers=l),modelModifiers:{number:!0},type:"number",min:"1"},null,8,["modelValue"])])]),t("div",St,[t("div",null,[t("label",Vt,o(e(s)("library.style")),1),V(t("select",{"onUpdate:modelValue":r[13]||(r[13]=l=>e(c).style=l),class:"w-full h-9 px-3 rounded-md border border-border bg-background text-sm"},[r[20]||(r[20]=t("option",{value:null},"-",-1)),(d(),y(g,null,S(H,l=>t("option",{key:l,value:l},o(G(l)),9,Ut)),64))],512),[[L,e(c).style]])]),t("div",null,[t("label",Ft,o(e(s)("library.mood")),1),V(t("select",{"onUpdate:modelValue":r[14]||(r[14]=l=>e(c).mood=l),class:"w-full h-9 px-3 rounded-md border border-border bg-background text-sm"},[r[21]||(r[21]=t("option",{value:null},"-",-1)),(d(),y(g,null,S(M,l=>t("option",{key:l,value:l},o(q(l)),9,$t)),64))],512),[[L,e(c).mood]])])]),a(b,{class:"w-full",disabled:!e(c).name.trim(),onClick:r[15]||(r[15]=l=>e(w)?ne():re())},{default:n(()=>[m(o(e(w)?e(s)("common.save"):e(s)("common.add")),1)]),_:1},8,["disabled"])]),_:1})):v("",!0),e(E).length>0?(d(),y("div",zt,[(d(!0),y(g,null,S(e(E),(l,be)=>V((d(),p(_,{key:l.id,initial:{opacity:0,y:10},enter:{opacity:1,y:0,transition:{delay:be*30}},class:"game-card p-4"},{default:n(()=>[t("div",Bt,[t("div",Lt,[t("h3",Dt,o(l.name),1),t("div",Gt,[a(e(Le),{class:"h-3 w-3"}),t("span",null,o(l.minPlayers)+"-"+o(l.maxPlayers),1),l.style?(d(),y("span",At,o(G(l.style)),1)):v("",!0)]),t("div",jt,[l.isBorrowed?(d(),p(A,{key:0,variant:"warning"},{default:n(()=>[m(o(e(s)("library.lentTo",{name:l.borrowedTo})),1)]),_:2},1024)):v("",!0),l.forSale?(d(),p(A,{key:1,variant:"secondary"},{default:n(()=>[a(e(Q),{class:"h-3 w-3 mr-1"}),m(" "+o(e(s)("library.forSale")),1)]),_:1})):v("",!0)])]),t("div",Ot,[a(X,{variant:"ghost",size:"sm",onClick:f=>ae(l)},{default:n(()=>[a(e(De),{class:"h-4 w-4"})]),_:1},8,["onClick"]),a(X,{variant:"destructive",size:"sm",onClick:f=>F.value=l.id},{default:n(()=>[a(e(Ge),{class:"h-4 w-4"})]),_:1},8,["onClick"])])]),t("div",Ht,[l.isBorrowed?(d(),p(b,{key:1,variant:"outline",size:"sm",onClick:f=>ie(l.id)},{default:n(()=>[m(o(e(s)("library.return")),1)]),_:1},8,["onClick"])):(d(),p(b,{key:0,variant:"outline",size:"sm",onClick:f=>$.value=l.id},{default:n(()=>[m(o(e(s)("library.lend")),1)]),_:1},8,["onClick"])),a(b,{variant:l.forSale?"default":"outline",size:"sm",onClick:f=>ue(l)},{default:n(()=>[a(e(Q),{class:"h-3 w-3 mr-1"}),m(" "+o(l.forSale?e(s)("library.notForSale"):e(s)("library.markForSale")),1)]),_:2},1032,["variant","onClick"]),e(O)(l.id).length>0?(d(),p(b,{key:2,variant:"ghost",size:"sm",onClick:f=>fe(l.id)},{default:n(()=>[a(e(Ae),{class:"h-3 w-3 mr-1"}),m(" "+o(e(s)("library.history"))+" ",1),e(z)===l.id?(d(),p(e(Oe),{key:0,class:"h-3 w-3 ml-1"})):(d(),p(e(je),{key:1,class:"h-3 w-3 ml-1"}))]),_:2},1032,["onClick"])):v("",!0)]),e(z)===l.id?(d(),y("div",Mt,[t("h4",Et,o(e(s)("library.loanHistory")),1),t("div",Nt,[(d(!0),y(g,null,S(e(O)(l.id),f=>(d(),y("div",{key:f.id,class:"flex items-center justify-between text-sm p-2 bg-muted rounded"},[t("span",Rt,o(f.borrower),1),t("span",Tt,[m(o(K(f.lentAt))+" ",1),f.returnedAt?(d(),y(g,{key:0},[m(" â†’ "+o(K(f.returnedAt)),1)],64)):(d(),p(A,{key:1,variant:"warning",class:"ml-2"},{default:n(()=>[m(o(e(s)("library.ongoing")),1)]),_:1}))])]))),128))])])):v("",!0),e($)===l.id?(d(),y("div",It,[a(k,{modelValue:e(C),"onUpdate:modelValue":r[16]||(r[16]=f=>Ue(C)?C.value=f:null),placeholder:e(s)("library.borrowerName"),class:"flex-1",onKeyup:Ve(f=>I(l.id),["enter"])},null,8,["modelValue","placeholder","onKeyup"]),a(b,{size:"sm",onClick:f=>I(l.id)},{default:n(()=>[m(o(e(s)("common.save")),1)]),_:1},8,["onClick"]),a(b,{variant:"ghost",size:"sm",onClick:r[17]||(r[17]=f=>$.value=null)},{default:n(()=>[m(o(e(s)("common.cancel")),1)]),_:1})])):v("",!0),e(F)===l.id?(d(),y("div",qt,[t("span",Kt,o(e(s)("library.deleteConfirm",{name:l.name})),1),a(b,{size:"sm",variant:"destructive",onClick:f=>de(l.id)},{default:n(()=>[m(o(e(s)("common.delete")),1)]),_:1},8,["onClick"]),a(b,{size:"sm",variant:"ghost",onClick:r[18]||(r[18]=f=>F.value=null)},{default:n(()=>[m(o(e(s)("common.cancel")),1)]),_:1})])):v("",!0)]),_:2},1032,["enter"])),[[ye]])),128))])):e(W).length===0?(d(),y("div",Xt,[t("p",Yt,o(e(s)("library.empty")),1),a(b,{onClick:r[19]||(r[19]=l=>P.value=!0)},{default:n(()=>[a(e(J),{class:"h-4 w-4 mr-2"}),m(" "+o(e(s)("library.addFirst")),1)]),_:1})])):(d(),y("p",Jt,o(e(s)("library.noResults")),1))])])}}});export{yl as default};
