import{_ as Xe}from"./CJ4cJp4b.js";import{_ as Ye}from"./De8DXFR1.js";import{_ as Qe,X as de}from"./B57y80sn.js";import{_ as We,P as ce}from"./dR07OhUR.js";import{_ as Ze}from"./Cr7CcaXS.js";import{_ as et}from"./BGXJZgrc.js";import{_ as tt}from"./BnUVIDLX.js";import{e as st,A as ke,z as nt,r as p,i as lt,j as at,c as i,a as d,m as V,p as y,w as r,d as m,t as a,h as e,b as l,G as K,C as W,F as g,s as I,q as x,v as ot,T as it,l as rt,o as s,y as le,x as ue}from"./85CuR8qa.js";import{u as dt}from"./Cv07yaoO.js";import{u as be}from"./D1fsSWnf.js";import{g as ct}from"./GJI3iByT.js";import{A as ut}from"./8KN2TOyx.js";import{H as mt}from"./bryQlBeW.js";import{c as ft}from"./sFs-GXhc.js";import{P as me}from"./CqiwjnuP.js";import{U as vt}from"./CGGRJAjd.js";import{T as fe}from"./BpZlIGRI.js";import{P as Ce}from"./C1pbPz2H.js";import"./DKh0UTUP.js";const we=ft("check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]),ee="gamepal-game-sessions",C=p([]),T=p(null),Se=p(!1);function pt(){if(!Se.value){try{const E=localStorage.getItem(ee);E&&(C.value=JSON.parse(E));const o=localStorage.getItem(`${ee}-current`);o&&(T.value=o)}catch{C.value=[]}Se.value=!0}}function Z(){try{localStorage.setItem(ee,JSON.stringify(C.value)),T.value?localStorage.setItem(`${ee}-current`,T.value):localStorage.removeItem(`${ee}-current`)}catch{console.warn("Failed to save game sessions")}}function _t(){st(pt);const E=nt(()=>T.value?C.value.find(_=>_.id===T.value)??null:null);function o(_,f,h=[]){const O={id:ct(),name:_.trim(),playerIds:[...f],teamIds:[...h],createdAt:new Date().toISOString(),lastUsedAt:new Date().toISOString()};return C.value.unshift(O),Z(),O}function w(_,f){const h=C.value.find(O=>O.id===_);h&&(f.name!==void 0&&(h.name=f.name.trim()),f.playerIds!==void 0&&(h.playerIds=[...f.playerIds]),f.teamIds!==void 0&&(h.teamIds=[...f.teamIds]),h.lastUsedAt=new Date().toISOString(),Z())}function ae(_){const f=C.value.findIndex(h=>h.id===_);f!==-1&&(C.value.splice(f,1),T.value===_&&(T.value=null),Z())}function oe(_){const f=C.value.find(h=>h.id===_);return f?(T.value=_,f.lastUsedAt=new Date().toISOString(),Z(),f):null}function ie(){T.value=null,Z()}function S(_){return C.value.find(f=>f.id===_)??null}return{sessions:ke(C),currentSession:E,currentSessionId:ke(T),createSession:o,updateSession:w,deleteSession:ae,loadSession:oe,unloadSession:ie,getSession:S}}const yt={class:"min-h-dvh bg-background"},gt={class:"sticky top-0 z-10 bg-card/80 backdrop-blur-lg border-b border-border"},ht={class:"flex items-center gap-4 px-4 py-4"},xt={class:"heading flex-1 font-display text-lg font-bold tracking-tight",initial:{opacity:0,y:-10},enter:{opacity:1,y:0,transition:{delay:100}}},kt={class:"p-4 space-y-6"},bt={key:0},Ct={initial:{opacity:0,y:20},enter:{opacity:1,y:0,transition:{delay:200}}},wt={class:"flex gap-2 mb-4"},St={key:0,class:"space-y-2"},It={class:"flex items-center gap-3"},Tt={class:"flex-1 font-medium"},Pt={key:0,class:"flex flex-wrap gap-2 pt-3 mt-3 border-t border-border"},zt={key:1,class:"flex items-center gap-2 pt-3 mt-3 border-t border-border"},Ut={class:"flex-1 text-sm text-muted-foreground"},$t={key:1,class:"text-center text-muted-foreground py-12"},Vt={key:1},Nt={initial:{opacity:0,y:20},enter:{opacity:1,y:0,transition:{delay:200}}},At={class:"flex gap-2 mb-4"},Dt={key:0,class:"space-y-3"},Et={class:"flex items-center gap-3 mb-3"},Ot={class:"flex-1 font-semibold"},Bt={key:0,class:"flex flex-wrap gap-1"},Lt={key:1,class:"text-sm text-muted-foreground"},jt={key:2,class:"flex items-center gap-2 pt-3 mt-3 border-t border-border"},Ft={class:"flex-1 text-sm text-muted-foreground"},Kt={key:1,class:"text-center text-muted-foreground py-12"},Mt={key:2,class:"mt-6"},Gt={class:"text-xs font-semibold uppercase tracking-wider text-muted-foreground mb-3"},Ht={class:"flex flex-wrap gap-2"},Rt={key:2},Jt={initial:{opacity:0,y:20},enter:{opacity:1,y:0,transition:{delay:200}}},qt={key:0,class:"mb-6"},Xt={class:"flex items-center gap-3 mb-3"},Yt={class:"flex-1 font-semibold text-primary"},Qt={class:"flex flex-wrap gap-1"},Wt={class:"flex justify-between items-center mb-4"},Zt={class:"text-xs font-semibold uppercase tracking-wider text-muted-foreground"},es={key:1,class:"space-y-3"},ts={class:"flex items-center gap-3 mb-2"},ss={class:"flex-1 font-semibold"},ns={class:"text-xs text-muted-foreground"},ls={class:"flex flex-wrap gap-1 mb-3"},as={class:"flex gap-2 pt-3 border-t border-border"},os={key:0,class:"flex items-center gap-2 pt-3 mt-3 border-t border-border"},is={class:"flex-1 text-sm text-muted-foreground"},rs={key:2,class:"text-center text-muted-foreground py-12"},ds={class:"flex items-center justify-between"},cs={class:"text-lg font-semibold"},us={class:"text-xs font-semibold uppercase tracking-wider text-muted-foreground mb-2 block"},ms={class:"text-xs font-semibold uppercase tracking-wider text-muted-foreground mb-2 block"},fs={key:0,class:"flex flex-wrap gap-2"},vs=["onClick"],ps={key:1,class:"text-sm text-muted-foreground"},_s={key:0},ys={class:"text-xs font-semibold uppercase tracking-wider text-muted-foreground mb-2 block"},gs={class:"flex flex-wrap gap-2"},hs=["onClick"],xs={class:"flex gap-2 pt-4"},js=lt({__name:"players",setup(E){const{t:o}=at(),{players:w,addPlayer:ae,updatePlayer:oe,deletePlayer:ie}=dt(),{teams:S,addTeam:_,deleteTeam:f,addPlayerToTeam:h,removePlayerFromAllTeams:O,getPlayerTeam:M}=be(),{sessions:re,currentSession:G,createSession:Ie,updateSession:Te,deleteSession:Pe,loadSession:ze,unloadSession:Ue}=_t(),H=p("players"),R=p(""),J=p(""),B=p(null),N=p(""),L=p(null),A=p(""),q=p(null),k=p(null),te=p(!1),D=p(""),b=p([]),P=p([]),j=p(null);function ve(){const n=R.value.trim();n!==""&&(ae(n),R.value="")}function pe(){const n=J.value.trim();n!==""&&(_(n),J.value="")}function $e(n){B.value=n.id,N.value=n.name}function _e(){B.value&&N.value.trim()&&oe(B.value,{name:N.value}),B.value=null,N.value=""}function ye(){B.value=null,N.value=""}function Ve(n){L.value=n.id,A.value=n.name}function ge(){if(L.value&&A.value.trim()){const{updateTeam:n}=be();n(L.value,{name:A.value})}L.value=null,A.value=""}function he(){L.value=null,A.value=""}function Ne(n){O(n),ie(n),k.value=null}function Ae(n){f(n),k.value=null}function De(n){q.value=q.value===n?null:n}function Ee(n,c){h(c,n),q.value=null}function Oe(n){O(n),q.value=null}function Be(n){return S.value.find(X=>X.id===n)?.playerIds.length??0}function xe(){return w.value.filter(n=>!M(n.id))}function Le(){te.value=!0,D.value="",b.value=[],P.value=[],j.value=null}function je(n){const c=re.value.find(X=>X.id===n);c&&(te.value=!0,D.value=c.name,b.value=[...c.playerIds],P.value=[...c.teamIds],j.value=n)}function Fe(n){const c=b.value.indexOf(n);c!==-1?b.value.splice(c,1):b.value.push(n)}function Ke(n){const c=P.value.indexOf(n);c!==-1?P.value.splice(c,1):P.value.push(n)}function Me(){const n=D.value.trim();n===""||b.value.length===0||(j.value?Te(j.value,{name:n,playerIds:b.value,teamIds:P.value}):Ie(n,b.value,P.value),se())}function se(){te.value=!1,D.value="",b.value=[],P.value=[],j.value=null}function Ge(n){Pe(n),k.value=null}function He(n){ze(n)}function Re(){Ue()}function Je(n){return new Date(n).toLocaleDateString()}return(n,c)=>{const X=Xe,qe=Ye,Y=Qe,v=We,z=Ze,F=et,Q=tt,U=rt("motion");return s(),i("div",yt,[d("header",gt,[d("div",ht,[V((s(),y(X,{to:"/",class:"players-page__back flex h-10 w-10 items-center justify-center rounded-full text-muted-foreground transition-colors hover:bg-muted hover:text-foreground",initial:{opacity:0,x:-10},enter:{opacity:1,x:0}},{default:r(()=>[l(e(ut),{class:"h-5 w-5"})]),_:1})),[[U]]),V((s(),i("h1",xt,[m(a(e(o)("players.title")),1)])),[[U]])])]),d("div",kt,[V(l(qe,{tabs:[{value:"players",label:e(o)("players.players")},{value:"teams",label:e(o)("players.teams")},{value:"sessions",label:e(o)("players.sessions"),icon:e(mt)}],"model-value":e(H),initial:{opacity:0,y:10},enter:{opacity:1,y:0,transition:{delay:150}},"onUpdate:modelValue":c[0]||(c[0]=t=>H.value=t)},null,8,["tabs","model-value"]),[[U]]),e(H)==="players"?(s(),i("div",bt,[V((s(),i("section",Ct,[d("div",wt,[l(Y,{modelValue:e(R),"onUpdate:modelValue":c[1]||(c[1]=t=>W(R)?R.value=t:null),placeholder:e(o)("players.newPlayerName"),class:"flex-1",onKeyup:K(ve,["enter"])},null,8,["modelValue","placeholder"]),l(v,{onClick:ve},{default:r(()=>[l(e(ce),{class:"h-4 w-4"}),m(" "+a(e(o)("common.add")),1)]),_:1})]),e(w).length>0?(s(),i("div",St,[(s(!0),i(g,null,I(e(w),(t,$)=>V((s(),y(Q,{key:t.id,initial:{opacity:0,x:-20},enter:{opacity:1,x:0,transition:{delay:250+$*30}},class:"player-card p-3"},{default:r(()=>[d("div",It,[d("span",{class:"w-8 h-8 rounded-full flex items-center justify-center text-white text-sm font-bold",style:le({backgroundColor:t.color})},a(t.name.charAt(0).toUpperCase()),5),e(B)===t.id?(s(),i(g,{key:0},[l(Y,{modelValue:e(N),"onUpdate:modelValue":c[2]||(c[2]=u=>W(N)?N.value=u:null),class:"flex-1",onKeyup:[K(_e,["enter"]),K(ye,["escape"])]},null,8,["modelValue"]),l(z,{size:"sm",onClick:_e},{default:r(()=>[l(e(we),{class:"h-4 w-4"})]),_:1}),l(z,{variant:"ghost",size:"sm",onClick:ye},{default:r(()=>[l(e(de),{class:"h-4 w-4"})]),_:1})],64)):(s(),i(g,{key:1},[d("span",Tt,a(t.name),1),e(M)(t.id)?(s(),y(F,{key:0,style:le({backgroundColor:e(M)(t.id)?.color})},{default:r(()=>[m(a(e(M)(t.id)?.name),1)]),_:2},1032,["style"])):x("",!0),l(z,{variant:"ghost",size:"sm",onClick:u=>$e(t)},{default:r(()=>[l(e(me),{class:"h-4 w-4"})]),_:1},8,["onClick"]),e(S).length>0?(s(),y(z,{key:1,variant:"ghost",size:"sm",onClick:u=>De(t.id)},{default:r(()=>[l(e(vt),{class:"h-4 w-4"})]),_:1},8,["onClick"])):x("",!0),l(z,{variant:"destructive",size:"sm",onClick:u=>k.value=t.id},{default:r(()=>[l(e(fe),{class:"h-4 w-4"})]),_:1},8,["onClick"])],64))]),e(q)===t.id?(s(),i("div",Pt,[(s(!0),i(g,null,I(e(S),u=>(s(),y(v,{key:u.id,variant:"outline",size:"sm",style:le({borderColor:u.color}),onClick:ne=>Ee(t.id,u.id)},{default:r(()=>[m(a(u.name),1)]),_:2},1032,["style","onClick"]))),128)),e(M)(t.id)?(s(),y(v,{key:0,variant:"ghost",size:"sm",onClick:u=>Oe(t.id)},{default:r(()=>[m(a(e(o)("players.removeFromTeam")),1)]),_:1},8,["onClick"])):x("",!0)])):x("",!0),e(k)===t.id?(s(),i("div",zt,[d("span",Ut,a(e(o)("players.deleteConfirm",{name:t.name})),1),l(v,{size:"sm",variant:"destructive",onClick:u=>Ne(t.id)},{default:r(()=>[m(a(e(o)("common.delete")),1)]),_:1},8,["onClick"]),l(v,{size:"sm",variant:"ghost",onClick:c[3]||(c[3]=u=>k.value=null)},{default:r(()=>[m(a(e(o)("common.cancel")),1)]),_:1})])):x("",!0)]),_:2},1032,["enter"])),[[U]])),128))])):(s(),i("p",$t,a(e(o)("players.noPlayers")),1))])),[[U]])])):e(H)==="teams"?(s(),i("div",Vt,[V((s(),i("section",Nt,[d("div",At,[l(Y,{modelValue:e(J),"onUpdate:modelValue":c[4]||(c[4]=t=>W(J)?J.value=t:null),placeholder:e(o)("players.newTeamName"),class:"flex-1",onKeyup:K(pe,["enter"])},null,8,["modelValue","placeholder"]),l(v,{onClick:pe},{default:r(()=>[l(e(ce),{class:"h-4 w-4"}),m(" "+a(e(o)("common.add")),1)]),_:1})]),e(S).length>0?(s(),i("div",Dt,[(s(!0),i(g,null,I(e(S),(t,$)=>V((s(),y(Q,{key:t.id,initial:{opacity:0,x:-20},enter:{opacity:1,x:0,transition:{delay:250+$*30}},class:"team-card p-4"},{default:r(()=>[d("div",Et,[d("span",{class:"w-4 h-4 rounded-full",style:le({backgroundColor:t.color})},null,4),e(L)===t.id?(s(),i(g,{key:0},[l(Y,{modelValue:e(A),"onUpdate:modelValue":c[5]||(c[5]=u=>W(A)?A.value=u:null),class:"flex-1",onKeyup:[K(ge,["enter"]),K(he,["escape"])]},null,8,["modelValue"]),l(z,{size:"sm",onClick:ge},{default:r(()=>[l(e(we),{class:"h-4 w-4"})]),_:1}),l(z,{variant:"ghost",size:"sm",onClick:he},{default:r(()=>[l(e(de),{class:"h-4 w-4"})]),_:1})],64)):(s(),i(g,{key:1},[d("span",Ot,a(t.name),1),l(F,{variant:"secondary"},{default:r(()=>[m(a(Be(t.id))+" "+a(e(o)("players.members")),1)]),_:2},1024),l(z,{variant:"ghost",size:"sm",onClick:u=>Ve(t)},{default:r(()=>[l(e(me),{class:"h-4 w-4"})]),_:1},8,["onClick"]),l(z,{variant:"destructive",size:"sm",onClick:u=>k.value=t.id},{default:r(()=>[l(e(fe),{class:"h-4 w-4"})]),_:1},8,["onClick"])],64))]),t.playerIds.length>0?(s(),i("div",Bt,[(s(!0),i(g,null,I(t.playerIds,u=>(s(),y(F,{key:u,variant:"default"},{default:r(()=>[m(a(e(w).find(ne=>ne.id===u)?.name),1)]),_:2},1024))),128))])):(s(),i("p",Lt,a(e(o)("players.noMembers")),1)),e(k)===t.id?(s(),i("div",jt,[d("span",Ft,a(e(o)("players.deleteTeamConfirm",{name:t.name})),1),l(v,{size:"sm",variant:"destructive",onClick:u=>Ae(t.id)},{default:r(()=>[m(a(e(o)("common.delete")),1)]),_:1},8,["onClick"]),l(v,{size:"sm",variant:"ghost",onClick:c[6]||(c[6]=u=>k.value=null)},{default:r(()=>[m(a(e(o)("common.cancel")),1)]),_:1})])):x("",!0)]),_:2},1032,["enter"])),[[U]])),128))])):(s(),i("p",Kt,a(e(o)("players.noTeams")),1)),xe().length>0&&e(S).length>0?(s(),i("div",Mt,[d("h3",Gt,a(e(o)("players.unassigned")),1),d("div",Ht,[(s(!0),i(g,null,I(xe(),t=>(s(),y(F,{key:t.id,variant:"outline"},{default:r(()=>[m(a(t.name),1)]),_:2},1024))),128))])])):x("",!0)])),[[U]])])):e(H)==="sessions"?(s(),i("div",Rt,[V((s(),i("section",Jt,[e(G)?(s(),i("div",qt,[l(Q,{class:"current-session p-4 ring-2 ring-primary"},{default:r(()=>[d("div",Xt,[l(e(Ce),{class:"h-5 w-5 text-primary"}),d("span",Yt,a(e(G).name),1),l(v,{size:"sm",variant:"outline",onClick:Re},{default:r(()=>[m(a(e(o)("players.endSession")),1)]),_:1})]),d("div",Qt,[(s(!0),i(g,null,I(e(G).playerIds,t=>(s(),y(F,{key:t,variant:"default"},{default:r(()=>[m(a(e(w).find($=>$.id===t)?.name),1)]),_:2},1024))),128))])]),_:1})])):x("",!0),d("div",Wt,[d("h2",Zt,a(e(o)("players.sessionHistory")),1),l(v,{size:"sm",onClick:Le},{default:r(()=>[l(e(ce),{class:"h-4 w-4 mr-1"}),m(" "+a(e(o)("players.newSession")),1)]),_:1})]),e(re).length>0?(s(),i("div",es,[(s(!0),i(g,null,I(e(re),(t,$)=>V((s(),y(Q,{key:t.id,initial:{opacity:0,x:-20},enter:{opacity:1,x:0,transition:{delay:250+$*30}},class:ue(["session-card p-4",{"opacity-50":e(G)?.id===t.id}])},{default:r(()=>[d("div",ts,[d("span",ss,a(t.name),1),d("span",ns,a(Je(t.lastUsedAt)),1)]),d("div",ls,[(s(!0),i(g,null,I(t.playerIds,u=>(s(),y(F,{key:u,variant:"secondary"},{default:r(()=>[m(a(e(w).find(ne=>ne.id===u)?.name??e(o)("players.unknownPlayer")),1)]),_:2},1024))),128))]),d("div",as,[e(G)?.id!==t.id?(s(),y(v,{key:0,size:"sm",class:"flex-1",onClick:u=>He(t.id)},{default:r(()=>[l(e(Ce),{class:"h-4 w-4 mr-1"}),m(" "+a(e(o)("players.loadSession")),1)]),_:1},8,["onClick"])):x("",!0),l(v,{variant:"outline",size:"sm",onClick:u=>je(t.id)},{default:r(()=>[l(e(me),{class:"h-4 w-4"})]),_:1},8,["onClick"]),l(v,{variant:"outline",size:"sm",class:"text-destructive hover:text-destructive",onClick:u=>k.value=t.id},{default:r(()=>[l(e(fe),{class:"h-4 w-4"})]),_:1},8,["onClick"])]),e(k)===t.id?(s(),i("div",os,[d("span",is,a(e(o)("players.deleteSessionConfirm",{name:t.name})),1),l(v,{size:"sm",variant:"destructive",onClick:u=>Ge(t.id)},{default:r(()=>[m(a(e(o)("common.delete")),1)]),_:1},8,["onClick"]),l(v,{size:"sm",variant:"ghost",onClick:c[7]||(c[7]=u=>k.value=null)},{default:r(()=>[m(a(e(o)("common.cancel")),1)]),_:1})])):x("",!0)]),_:2},1032,["enter","class"])),[[U]])),128))])):(s(),i("p",rs,a(e(o)("players.noSessions")),1))])),[[U]])])):x("",!0)]),(s(),y(it,{to:"body"},[e(te)?(s(),i("div",{key:0,class:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 p-4",onClick:ot(se,["self"])},[l(Q,{class:"create-session-modal w-full max-w-md p-6 space-y-4 max-h-[80vh] overflow-y-auto"},{default:r(()=>[d("div",ds,[d("h3",cs,a(e(j)?e(o)("players.editSession"):e(o)("players.newSession")),1),d("button",{class:"p-1 text-muted-foreground hover:text-foreground transition-colors",onClick:se},[l(e(de),{class:"h-5 w-5"})])]),d("div",null,[d("label",us,a(e(o)("players.sessionName")),1),l(Y,{modelValue:e(D),"onUpdate:modelValue":c[8]||(c[8]=t=>W(D)?D.value=t:null),placeholder:e(o)("players.sessionNamePlaceholder")},null,8,["modelValue","placeholder"])]),d("div",null,[d("label",ms,a(e(o)("players.selectPlayers"))+" ("+a(e(b).length)+") ",1),e(w).length>0?(s(),i("div",fs,[(s(!0),i(g,null,I(e(w),t=>(s(),i("button",{key:t.id,class:ue(["px-3 py-2 rounded-lg text-sm transition-all",e(b).includes(t.id)?"bg-primary text-primary-foreground":"bg-muted text-muted-foreground hover:bg-muted/80"]),onClick:$=>Fe(t.id)},a(t.name),11,vs))),128))])):(s(),i("p",ps,a(e(o)("players.noPlayersToSelect")),1))]),e(S).length>0?(s(),i("div",_s,[d("label",ys,a(e(o)("players.selectTeams")),1),d("div",gs,[(s(!0),i(g,null,I(e(S),t=>(s(),i("button",{key:t.id,class:ue(["px-3 py-2 rounded-lg text-sm transition-all",e(P).includes(t.id)?"bg-primary text-primary-foreground":"bg-muted text-muted-foreground hover:bg-muted/80"]),onClick:$=>Ke(t.id)},a(t.name),11,hs))),128))])])):x("",!0),d("div",xs,[l(v,{class:"flex-1",disabled:!e(D).trim()||e(b).length===0,onClick:Me},{default:r(()=>[m(a(e(o)("common.save")),1)]),_:1},8,["disabled"]),l(v,{variant:"outline",onClick:se},{default:r(()=>[m(a(e(o)("common.cancel")),1)]),_:1})])]),_:1})])):x("",!0)]))])}}});export{js as default};
