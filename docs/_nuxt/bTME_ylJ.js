import{g as f}from"./GJI3iByT.js";import{v as h,p as c}from"./Dfw7wMy2.js";const S="gamepal-score-sessions";function A(){const s=c([]),d=c(null),l=c(!1);function m(){{try{const e=localStorage.getItem(S);e&&(s.value=JSON.parse(e))}catch{s.value=[]}l.value=!0}}function i(){try{localStorage.setItem(S,JSON.stringify(s.value))}catch{console.warn("Failed to save sessions")}}function p(e,n,t){const u=n.map(o=>({id:f(),name:o,scores:[],total:0})),a={id:f(),name:e,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString(),players:u,currentRound:1,maxRounds:t.maxRounds,maxScore:t.maxScore,isTeamMode:t.isTeamMode};return s.value.unshift(a),i(),a}function v(e){return s.value.find(n=>n.id===e)??null}function g(e,n,t,u){const a=s.value.find(r=>r.id===e);if(!a)return;const o=a.players.find(r=>r.id===n);if(o){for(;o.scores.length<t;)o.scores.push(0);o.scores[t-1]=u,o.total=o.scores.reduce((r,O)=>r+O,0),a.updatedAt=new Date().toISOString(),i()}}function I(e){const n=s.value.find(t=>t.id===e);n&&(n.currentRound++,n.updatedAt=new Date().toISOString(),i())}function x(e){const n=s.value.findIndex(t=>t.id===e);n!==-1&&(s.value.splice(n,1),i())}function y(e){d.value=e}return h(m),{sessions:s,currentSession:d,isLoaded:l,createSession:p,getSession:v,updatePlayerScore:g,addRound:I,deleteSession:x,setCurrentSession:y}}export{A as u};
