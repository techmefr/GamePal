import{g as f}from"./GJI3iByT.js";import{e as h,r as c}from"./JU7iOayy.js";const S="gamepal-score-sessions";function D(){const t=c([]),d=c(null),l=c(!1);function m(){{try{const e=localStorage.getItem(S);e&&(t.value=JSON.parse(e))}catch{t.value=[]}l.value=!0}}function i(){try{localStorage.setItem(S,JSON.stringify(t.value))}catch{console.warn("Failed to save sessions")}}function g(e,s,n){const u=s.map(o=>({id:f(),name:o,scores:[],total:0})),a={id:f(),name:e,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString(),players:u,currentRound:1,maxRounds:n.maxRounds,maxScore:n.maxScore,isTeamMode:n.isTeamMode,isClosed:!1};return t.value.unshift(a),i(),a}function p(e){return t.value.find(s=>s.id===e)??null}function v(e,s,n,u){const a=t.value.find(r=>r.id===e);if(!a)return;const o=a.players.find(r=>r.id===s);if(o){for(;o.scores.length<n;)o.scores.push(0);o.scores[n-1]=u,o.total=o.scores.reduce((r,y)=>r+y,0),a.updatedAt=new Date().toISOString(),i()}}function I(e){const s=t.value.find(n=>n.id===e);s&&(s.currentRound++,s.updatedAt=new Date().toISOString(),i())}function O(e){const s=t.value.findIndex(n=>n.id===e);s!==-1&&(t.value.splice(s,1),i())}function w(e){const s=t.value.find(n=>n.id===e);s&&(s.isClosed=!0,s.updatedAt=new Date().toISOString(),i())}function x(e){d.value=e}return h(m),{sessions:t,currentSession:d,isLoaded:l,createSession:g,getSession:p,updatePlayerScore:v,addRound:I,deleteSession:O,closeSession:w,setCurrentSession:x}}export{D as u};
