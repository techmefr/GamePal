import{_ as ce}from"./BJaxSbV9.js";import{_ as ue}from"./2RxMe3I3.js";import{_ as me}from"./BLGQa4DE.js";import{_ as fe}from"./DaXXJcGT.js";import{X as Z,_ as ge}from"./D79L-dNd.js";import{e as pe,A as ee,z as ie,r as _,i as ve,j as _e,c as d,a as o,m as $,t as s,h as e,p as w,w as c,b as r,F as U,s as B,q as b,v as te,T as ye,l as he,o as a,d as v,x as D,D as xe,C as oe}from"./JU7iOayy.js";import{c as be,a as ke}from"./Dn2euNds.js";import{u as Ce,S as we}from"./BMAV4WG4.js";import{g as Ie}from"./GJI3iByT.js";import{u as ne}from"./DRXvYwVj.js";import{U as Pe}from"./D5j3hawC.js";import{S as Se}from"./DZucBRIG.js";import{P as Ke}from"./DOdQbC3U.js";import{P as Ne}from"./DWtuxxs0.js";const X=be("gamepad-2",[["line",{x1:"6",x2:"10",y1:"11",y2:"11",key:"1gktln"}],["line",{x1:"8",x2:"8",y1:"9",y2:"13",key:"qnk9ow"}],["line",{x1:"15",x2:"15.01",y1:"12",y2:"12",key:"krot7o"}],["line",{x1:"18",x2:"18.01",y1:"10",y2:"10",key:"1lcuu1"}],["path",{d:"M17.32 5H6.68a4 4 0 0 0-3.978 3.59c-.006.052-.01.101-.017.152C2.604 9.416 2 14.456 2 16a3 3 0 0 0 3 3c1 0 1.5-.5 2-1l1.414-1.414A2 2 0 0 1 9.828 16h4.344a2 2 0 0 1 1.414.586L17 18c.5.5 1 1 2 1a3 3 0 0 0 3-3c0-1.545-.604-6.584-.685-7.258-.007-.05-.011-.1-.017-.151A4 4 0 0 0 17.32 5z",key:"mfqc10"}]]),O="gamepal-game-configs",g=_([]),y=_(null),se=_(!1);function Ge(){if(!se.value){try{const I=localStorage.getItem(O);I&&(g.value=JSON.parse(I));const n=localStorage.getItem(`${O}-active`);n&&(y.value=n)}catch{g.value=[]}se.value=!0}}function E(){try{localStorage.setItem(O,JSON.stringify(g.value)),y.value?localStorage.setItem(`${O}-active`,y.value):localStorage.removeItem(`${O}-active`)}catch{console.warn("Failed to save game configs")}}function Le(){pe(Ge);const I=ie(()=>y.value?g.value.find(u=>u.id===y.value)??null:null);function n(u,l={}){const m={id:Ie(),gameId:l.gameId??null,gameName:u.trim(),dicePresetId:l.dicePresetId??null,timerPresetId:l.timerPresetId??null,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()};return g.value.unshift(m),E(),m}function V(u,l){const m=g.value.find(j=>j.id===u);m&&(l.gameName!==void 0&&(m.gameName=l.gameName.trim()),l.dicePresetId!==void 0&&(m.dicePresetId=l.dicePresetId),l.timerPresetId!==void 0&&(m.timerPresetId=l.timerPresetId),m.updatedAt=new Date().toISOString(),E())}function p(u){const l=g.value.findIndex(m=>m.id===u);l!==-1&&(g.value.splice(l,1),y.value===u&&(y.value=null),E())}function G(u){const l=g.value.find(m=>m.id===u);return l?(y.value=u,l.updatedAt=new Date().toISOString(),E(),l):null}function T(){y.value=null,E()}function M(u){return g.value.find(l=>l.id===u)??null}function P(u){return g.value.find(l=>l.gameId===u)??null}return{configs:ee(g),activeConfig:I,activeConfigId:ee(y),createConfig:n,updateConfig:V,deleteConfig:p,activateConfig:G,deactivateConfig:T,getConfig:M,getConfigByGameId:P}}const $e={class:"min-h-dvh bg-background pb-8"},De={class:"sticky top-0 z-10 bg-background/80 backdrop-blur-lg border-b border-border"},Ve={class:"flex items-center justify-between px-4 py-4"},je={initial:{opacity:0,x:-20},enter:{opacity:1,x:0,transition:{delay:100}}},ze={class:"font-display text-2xl font-bold tracking-tight"},Ae={class:"text-sm text-muted-foreground"},Ue={class:"flex gap-2"},Be={class:"px-4 pt-6"},Ee={initial:{opacity:0,y:20},enter:{opacity:1,y:0,transition:{delay:100}},class:"mb-6"},Oe={class:"flex items-center gap-3 mb-3"},Te={class:"flex-1 font-semibold text-primary"},qe={class:"flex flex-wrap gap-2"},Fe={key:1,class:"flex gap-2"},Me={class:"grid grid-cols-2 gap-4"},Je={class:"text-3xl mb-3"},Re={class:"font-display font-semibold text-foreground mb-1"},He={class:"text-xs text-muted-foreground leading-relaxed"},Qe={key:0,class:"mt-6",initial:{opacity:0,y:20},enter:{opacity:1,y:0,transition:{delay:500}}},Xe={class:"text-xs font-semibold uppercase tracking-wider text-muted-foreground mb-3"},Ye={class:"space-y-2"},We={class:"flex items-center gap-3"},Ze={class:"flex-1 font-medium"},et={class:"flex items-center justify-between"},tt={class:"text-lg font-semibold"},ot={class:"relative"},nt={class:"flex-1 overflow-y-auto space-y-2 min-h-0"},st=["onClick"],it={class:"font-medium"},at={class:"text-xs text-muted-foreground"},lt={key:0},rt={key:1,class:"text-center text-muted-foreground py-8"},dt={class:"pt-4 border-t border-border"},ct={class:"flex items-center justify-between"},ut={class:"text-lg font-semibold"},mt={class:"text-xs font-semibold uppercase tracking-wider text-muted-foreground mb-2 block"},ft={key:0},gt={class:"text-xs font-semibold uppercase tracking-wider text-muted-foreground mb-2 block"},pt={class:"flex flex-wrap gap-2"},vt=["onClick"],_t={key:1},yt={class:"text-xs font-semibold uppercase tracking-wider text-muted-foreground mb-2 block"},ht={class:"flex flex-wrap gap-2"},xt=["onClick"],bt={class:"flex gap-2 pt-4"},zt=ve({__name:"index",setup(I){const{t:n}=_e(),{games:V}=Ce(),{activeConfig:p,configs:G,createConfig:T,updateConfig:M,activateConfig:P,deactivateConfig:u}=Le(),l=[{id:"random-picker",titleKey:"home.modes.randomPicker.title",descriptionKey:"home.modes.randomPicker.description",route:"/random-picker",enabled:!0,icon:"ðŸŽ²"},{id:"dice",titleKey:"home.modes.dice.title",descriptionKey:"home.modes.dice.description",route:"/dice",enabled:!0,icon:"ðŸŽ¯"},{id:"time",titleKey:"home.modes.time.title",descriptionKey:"home.modes.time.description",route:"/time",enabled:!0,icon:"â±ï¸"},{id:"scores",titleKey:"home.modes.scores.title",descriptionKey:"home.modes.scores.description",route:"/scores",enabled:!0,icon:"ðŸ“Š"},{id:"library",titleKey:"home.modes.library.title",descriptionKey:"home.modes.library.description",route:"/library",enabled:!0,icon:"ðŸ“š"},{id:"music",titleKey:"home.modes.music.title",descriptionKey:"home.modes.music.description",route:"/music",enabled:!1,icon:"ðŸŽµ"},{id:"rules",titleKey:"home.modes.rules.title",descriptionKey:"home.modes.rules.description",route:"/rules",enabled:!1,icon:"ðŸ“–"},{id:"narrator",titleKey:"home.modes.narrator.title",descriptionKey:"home.modes.narrator.description",route:"/narrator",enabled:!1,icon:"ðŸŽ­"}],m=_(!1),j=_(!1),S=_(""),K=_(null),k=_(""),h=_(null),x=_(null),{data:J}=ne("gamepal-dice-presets",[]),{data:R}=ne("gamepal-timer-presets",[]),Y=ie(()=>{if(!S.value.trim())return V.value;const f=S.value.toLowerCase();return V.value.filter(i=>i.name.toLowerCase().includes(f)||i.style?.toLowerCase().includes(f)||i.mood?.toLowerCase().includes(f))});function ae(){m.value=!0,S.value=""}function q(){m.value=!1,S.value=""}function le(f){const i=G.value.find(C=>C.gameId===f.id);if(i)P(i.id);else{const C=T(f.name,{gameId:f.id});P(C.id)}q()}function H(f){if(f){const i=G.value.find(C=>C.id===f);i&&(K.value=f,k.value=i.gameName,h.value=i.dicePresetId,x.value=i.timerPresetId)}else K.value=null,k.value="",h.value=null,x.value=null;j.value=!0}function F(){j.value=!1,K.value=null,k.value="",h.value=null,x.value=null}function re(){const f=k.value.trim();if(f!==""){if(K.value)M(K.value,{gameName:f,dicePresetId:h.value,timerPresetId:x.value}),P(K.value);else{const i=T(f,{dicePresetId:h.value,timerPresetId:x.value});P(i.id)}F()}}function de(){u()}return(f,i)=>{const C=ce,N=ue,Q=me,z=fe,W=ge,L=he("motion");return a(),d("div",$e,[o("header",De,[o("div",Ve,[$((a(),d("div",je,[o("h1",ze,s(e(n)("app.name")),1),o("p",Ae,s(e(n)("app.tagline")),1)])),[[L]]),o("div",Ue,[$((a(),w(C,{to:"/players",class:"home__players flex h-10 w-10 items-center justify-center rounded-full bg-muted text-muted-foreground transition-colors hover:bg-muted/80 hover:text-foreground",initial:{opacity:0,scale:.8},enter:{opacity:1,scale:1,transition:{delay:200}}},{default:c(()=>[r(e(Pe),{class:"h-5 w-5"})]),_:1})),[[L]]),$((a(),w(C,{to:"/settings",class:"home__settings flex h-10 w-10 items-center justify-center rounded-full bg-muted text-muted-foreground transition-colors hover:bg-muted/80 hover:text-foreground",initial:{opacity:0,scale:.8},enter:{opacity:1,scale:1,transition:{delay:250}}},{default:c(()=>[r(e(Se),{class:"h-5 w-5"})]),_:1})),[[L]])])])]),o("main",Be,[$((a(),d("section",Ee,[e(p)?(a(),w(z,{key:0,class:"active-config p-4 ring-2 ring-primary"},{default:c(()=>[o("div",Oe,[r(e(X),{class:"h-5 w-5 text-primary"}),o("span",Te,s(e(p).gameName),1),r(N,{size:"sm",variant:"ghost",onClick:i[0]||(i[0]=t=>H(e(p).id))},{default:c(()=>[r(e(Ke),{class:"h-4 w-4"})]),_:1}),r(N,{size:"sm",variant:"outline",onClick:de},{default:c(()=>[v(s(e(n)("home.endGame")),1)]),_:1})]),o("div",qe,[e(p).dicePresetId?(a(),w(Q,{key:0,variant:"secondary"},{default:c(()=>[v(s(e(J).find(t=>t.id===e(p)?.dicePresetId)?.name??e(n)("home.dicePreset")),1)]),_:1})):b("",!0),e(p).timerPresetId?(a(),w(Q,{key:1,variant:"secondary"},{default:c(()=>[v(s(e(R).find(t=>t.id===e(p)?.timerPresetId)?.name??e(n)("home.timerPreset")),1)]),_:1})):b("",!0)])]),_:1})):(a(),d("div",Fe,[r(N,{class:"flex-1",onClick:ae},{default:c(()=>[r(e(X),{class:"h-4 w-4 mr-2"}),v(" "+s(e(n)("home.selectGame")),1)]),_:1}),r(N,{variant:"outline",onClick:i[1]||(i[1]=t=>H())},{default:c(()=>[v(s(e(n)("home.manualConfig")),1)]),_:1})]))])),[[L]]),o("div",Me,[(a(),d(U,null,B(l,(t,A)=>$(r(xe(t.enabled?"NuxtLink":"div"),{key:t.id,to:t.enabled?t.route:void 0,class:D(["mode-card",{"mode-card--disabled":!t.enabled}]),initial:{opacity:0,y:20},enter:{opacity:1,y:0,transition:{delay:150+A*50}}},{default:c(()=>[r(z,{hoverable:t.enabled,class:D(e(ke)("relative h-full p-4",!t.enabled&&"opacity-50"))},{default:c(()=>[t.enabled?b("",!0):(a(),w(Q,{key:0,variant:"secondary",class:"mode-card__badge absolute -top-2 -right-2"},{default:c(()=>[v(s(e(n)("common.comingSoon")),1)]),_:1})),o("div",Je,s(t.icon),1),o("h2",Re,s(e(n)(t.titleKey)),1),o("p",He,s(e(n)(t.descriptionKey)),1)]),_:2},1032,["hoverable","class"])]),_:2},1032,["to","class","enter"]),[[L]])),64))]),e(G).length>0&&!e(p)?$((a(),d("section",Qe,[o("h2",Xe,s(e(n)("home.recentGames")),1),o("div",Ye,[(a(!0),d(U,null,B(e(G).slice(0,3),t=>(a(),w(z,{key:t.id,hoverable:"",class:"recent-game p-3 cursor-pointer",onClick:A=>e(P)(t.id)},{default:c(()=>[o("div",We,[r(e(X),{class:"h-4 w-4 text-muted-foreground"}),o("span",Ze,s(t.gameName),1),r(e(Ne),{class:"h-4 w-4 text-primary"})])]),_:2},1032,["onClick"]))),128))])])),[[L]]):b("",!0)]),(a(),w(ye,{to:"body"},[e(m)?(a(),d("div",{key:0,class:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 p-4",onClick:te(q,["self"])},[r(z,{class:"game-selector w-full max-w-md p-6 space-y-4 max-h-[80vh] overflow-hidden flex flex-col"},{default:c(()=>[o("div",et,[o("h3",tt,s(e(n)("home.selectGame")),1),o("button",{class:"p-1 text-muted-foreground hover:text-foreground transition-colors",onClick:q},[r(e(Z),{class:"h-5 w-5"})])]),o("div",ot,[r(e(we),{class:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground"}),r(W,{modelValue:e(S),"onUpdate:modelValue":i[2]||(i[2]=t=>oe(S)?S.value=t:null),placeholder:e(n)("home.searchGame"),class:"pl-10"},null,8,["modelValue","placeholder"])]),o("div",nt,[e(Y).length>0?(a(!0),d(U,{key:0},B(e(Y),t=>(a(),d("button",{key:t.id,class:"game-item w-full p-3 rounded-lg bg-muted hover:bg-muted/80 text-left transition-colors",onClick:A=>le(t)},[o("p",it,s(t.name),1),o("p",at,[v(s(t.minPlayers)+"-"+s(t.maxPlayers)+" "+s(e(n)("home.players"))+" ",1),t.style?(a(),d("span",lt," - "+s(t.style),1)):b("",!0)])],8,st))),128)):(a(),d("p",rt,s(e(V).length===0?e(n)("home.noGamesInLibrary"):e(n)("home.noGamesFound")),1))]),o("div",dt,[r(N,{variant:"outline",class:"w-full",onClick:i[3]||(i[3]=t=>{q(),H()})},{default:c(()=>[v(s(e(n)("home.manualConfig")),1)]),_:1})])]),_:1})])):b("",!0),e(j)?(a(),d("div",{key:1,class:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 p-4",onClick:te(F,["self"])},[r(z,{class:"config-editor w-full max-w-md p-6 space-y-4"},{default:c(()=>[o("div",ct,[o("h3",ut,s(e(K)?e(n)("home.editConfig"):e(n)("home.newConfig")),1),o("button",{class:"p-1 text-muted-foreground hover:text-foreground transition-colors",onClick:F},[r(e(Z),{class:"h-5 w-5"})])]),o("div",null,[o("label",mt,s(e(n)("home.gameName")),1),r(W,{modelValue:e(k),"onUpdate:modelValue":i[4]||(i[4]=t=>oe(k)?k.value=t:null),placeholder:e(n)("home.gameNamePlaceholder")},null,8,["modelValue","placeholder"])]),e(J).length>0?(a(),d("div",ft,[o("label",gt,s(e(n)("home.dicePreset")),1),o("div",pt,[o("button",{class:D(["px-3 py-2 rounded-lg text-sm transition-all",e(h)===null?"bg-primary text-primary-foreground":"bg-muted text-muted-foreground hover:bg-muted/80"]),onClick:i[5]||(i[5]=t=>h.value=null)},s(e(n)("common.none")),3),(a(!0),d(U,null,B(e(J),t=>(a(),d("button",{key:t.id,class:D(["px-3 py-2 rounded-lg text-sm transition-all",e(h)===t.id?"bg-primary text-primary-foreground":"bg-muted text-muted-foreground hover:bg-muted/80"]),onClick:A=>h.value=t.id},s(t.name),11,vt))),128))])])):b("",!0),e(R).length>0?(a(),d("div",_t,[o("label",yt,s(e(n)("home.timerPreset")),1),o("div",ht,[o("button",{class:D(["px-3 py-2 rounded-lg text-sm transition-all",e(x)===null?"bg-primary text-primary-foreground":"bg-muted text-muted-foreground hover:bg-muted/80"]),onClick:i[6]||(i[6]=t=>x.value=null)},s(e(n)("common.none")),3),(a(!0),d(U,null,B(e(R),t=>(a(),d("button",{key:t.id,class:D(["px-3 py-2 rounded-lg text-sm transition-all",e(x)===t.id?"bg-primary text-primary-foreground":"bg-muted text-muted-foreground hover:bg-muted/80"]),onClick:A=>x.value=t.id},s(t.name),11,xt))),128))])])):b("",!0),o("div",bt,[r(N,{class:"flex-1",disabled:!e(k).trim(),onClick:re},{default:c(()=>[v(s(e(n)("common.save")),1)]),_:1},8,["disabled"]),r(N,{variant:"outline",onClick:F},{default:c(()=>[v(s(e(n)("common.cancel")),1)]),_:1})])]),_:1})])):b("",!0)]))])}}});export{zt as default};
