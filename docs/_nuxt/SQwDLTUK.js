import{_ as Ve}from"./TXKbBkAF.js";import{_ as Ae,A as Se}from"./CtbDvCpr.js";import{c as Ue,_ as Me,P as ce,a as $e,X as ue,b as Be,s as Le}from"./kXrY6zLn.js";import{_ as Ne}from"./DraaGr1t.js";import{c as K,a as Oe,_ as Re}from"./ROwC7uvM.js";import{e as pe,o as n,c as s,a as u,j as _,n as S,i as e,f as De,C as Ee,b as o,w as d,t as c,F as V,k as A,D as de,z as me,g as N,h as P,p as v,r as je,m as q,d as p,q as H,_ as qe}from"./Dfw7wMy2.js";import{u as fe}from"./DKf7lokl.js";import{p as _e,g as ve,s as He}from"./GJI3iByT.js";const Fe=K("shuffle",[["path",{d:"m18 14 4 4-4 4",key:"10pe0f"}],["path",{d:"m18 2 4 4-4 4",key:"pucp1d"}],["path",{d:"M2 18h1.973a4 4 0 0 0 3.3-1.7l5.454-8.6a4 4 0 0 1 3.3-1.7H22",key:"1ailkh"}],["path",{d:"M2 6h1.972a4 4 0 0 1 3.6 2.2",key:"km57vx"}],["path",{d:"M22 18h-6.041a4 4 0 0 1-3.3-1.8l-.359-.45",key:"os18l9"}]]);const Ke=K("square-check-big",[["path",{d:"M21 10.656V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h12.344",key:"2acyp4"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);const Xe=K("square",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]]);const Ye=K("users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]]),Ge=["aria-checked","disabled"],Je={key:0,class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"3"},Qe=pe({__name:"Checkbox",props:{modelValue:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1}},emits:["update:modelValue"],setup(g,{emit:i}){const U=i;function z(m){U("update:modelValue",!m)}return(m,k)=>(n(),s("button",{type:"button",role:"checkbox","aria-checked":g.modelValue,disabled:g.disabled,class:S(e(Oe)("flex h-6 w-6 shrink-0 items-center justify-center rounded-md border-2 transition-all duration-200","focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2","disabled:cursor-not-allowed disabled:opacity-50",g.modelValue?"border-primary bg-primary text-primary-foreground":"border-muted-foreground bg-transparent")),onClick:k[0]||(k[0]=M=>z(g.modelValue))},[g.modelValue?(n(),s("svg",Je,[...k[1]||(k[1]=[u("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M5 13l4 4L19 7"},null,-1)])])):_("",!0)],10,Ge))}}),We=Object.assign(Qe,{__name:"UiCheckbox"}),F=["#818cf8","#c084fc","#f472b6","#fb7185","#fbbf24","#4ade80","#22d3ee","#60a5fa","#a78bfa","#f97316"];function Ze(){const g=Math.floor(Math.random()*F.length);return F[g]}function et(g){return F[g%F.length]}const tt={class:"min-h-dvh bg-background flex flex-col"},at={class:"sticky top-0 z-10 bg-card/80 backdrop-blur-lg border-b border-border"},lt={class:"flex items-center gap-4 px-4 py-3"},nt={class:"heading flex-1 font-display text-lg font-bold"},ot={key:0,class:"touch-zone flex-1 relative"},st={key:0,class:"touch-area__hint absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 text-muted-foreground text-lg text-center px-8"},it={key:0,class:"touch-zone__status absolute bottom-8 left-1/2 -translate-x-1/2 text-muted-foreground animate-pulse"},rt={key:1,class:"list-zone flex-1 p-4 flex flex-col gap-4 overflow-y-auto"},ct={class:"flex gap-2"},ut={key:0,class:"list-zone__toolbar flex gap-2 flex-wrap"},dt={class:"font-semibold"},mt={class:"flex gap-2"},ft={key:0,class:"space-y-2"},_t={class:"flex items-center gap-2 mb-2"},vt={class:"font-medium flex-1"},pt={key:0,class:"flex flex-wrap gap-1"},ht={key:1,class:"pt-3 border-t border-border"},yt={class:"text-xs text-muted-foreground mb-2"},gt={class:"flex flex-wrap gap-1"},kt={key:2,class:"player-list space-y-2"},xt={class:"flex items-center gap-3"},bt={class:"player-list__name flex-1 font-medium"},wt={class:"player-list__actions flex gap-1"},Pt={key:0,class:"player-list__team-select flex flex-wrap gap-2 pt-3 mt-3 border-t border-border"},Ct={key:3,class:"list-zone__empty text-center text-muted-foreground py-8"},Tt={key:4,class:"list-zone__actions flex flex-col gap-3 mt-auto pt-4"},It={key:5,initial:{opacity:0,scale:.8},enter:{opacity:1,scale:1},class:"list-zone__result text-center py-8"},zt={class:"list-zone__winner font-display text-3xl font-bold text-primary"},Vt={class:"turn-order__title font-semibold text-center mb-4"},At={class:"turn-order__list space-y-2"},St=["enter"],Ut={class:"turn-order__position w-8 h-8 flex items-center justify-center bg-primary text-primary-foreground rounded-full font-bold text-sm"},Mt={class:"turn-order__name font-medium"},$t=3e3,W=2,Bt=pe({__name:"random-picker",setup(g){const{t:i}=De(),U=v("touch"),z=v("player"),m=v([]),k=v(null),M=v(!1),O=v(null),{data:f}=fe("gamepal-picker-players",[]),{data:x}=fe("gamepal-picker-teams",[]),$=v(""),B=v(""),C=v(null),T=v([]),w=v(!1),R=v(!1),D=v(null),X=H(()=>f.value.filter(l=>l.isActive)),Y=H(()=>x.value.filter(l=>f.value.filter(r=>r.teamId===l.id&&r.isActive).length>0)),Z=H(()=>f.value.filter(l=>l.teamId===null)),E=H(()=>z.value==="team"?Y.value.length>=2:X.value.length>=2);function he(l){l.preventDefault(),te();for(const t of Array.from(l.changedTouches))m.value.push({id:t.identifier,x:t.clientX,y:t.clientY,color:Ze()});ge()}function ye(l){l.preventDefault();for(const t of Array.from(l.changedTouches)){const r=m.value.find(h=>h.id===t.identifier);r&&(r.x=t.clientX,r.y=t.clientY)}}function ee(l){l.preventDefault();for(const t of Array.from(l.changedTouches)){const r=m.value.findIndex(h=>h.id===t.identifier);r!==-1&&m.value.splice(r,1)}m.value.length<W&&G()}function ge(){G(),m.value.length>=W&&(O.value=setTimeout(()=>ke(),$t))}function G(){O.value&&(clearTimeout(O.value),O.value=null)}function ke(){m.value.length!==0&&(M.value=!0,k.value=_e(m.value),setTimeout(()=>{m.value=[],M.value=!1},2e3))}function te(){k.value=null,M.value=!1}function ae(){const l=$.value.trim();l!==""&&(f.value.push({id:ve(),name:l,isActive:!0,teamId:null}),$.value="")}function xe(l){const t=f.value.findIndex(r=>r.id===l);t!==-1&&f.value.splice(t,1)}function be(l){const t=f.value.find(r=>r.id===l);t&&(t.isActive=!t.isActive)}function le(l){f.value.forEach(t=>{t.isActive=l})}function ne(){const l=B.value.trim();l!==""&&(x.value.push({id:ve(),name:l,color:et(x.value.length)}),B.value="")}function we(l){f.value.forEach(r=>{r.teamId===l&&(r.teamId=null)});const t=x.value.findIndex(r=>r.id===l);t!==-1&&x.value.splice(t,1)}function oe(l,t){const r=f.value.find(h=>h.id===l);r&&(r.teamId=t),D.value=null}function J(l){return f.value.filter(t=>t.teamId===l)}function se(l){return x.value.find(t=>t.id===l)||null}function Pe(){if(!E.value)return;w.value=!0,C.value=null,T.value=[];const l=z.value==="team"?Y.value.map(h=>h.name):X.value.map(h=>h.name);let t=0;const r=Le(()=>{C.value=_e(l),++t>=15&&(clearInterval(r),w.value=!1)},100)}function Ce(){if(!E.value)return;w.value=!0,C.value=null,T.value=[];const l=z.value==="team"?Y.value.map(t=>t.name):X.value.map(t=>t.name);setTimeout(()=>{T.value=He([...l]),w.value=!1},500)}function Te(l){U.value=l,te(),C.value=null,T.value=[]}function Ie(){C.value=null,T.value=[]}return Ee(()=>G()),(l,t)=>{const r=Ve,h=Ae,ie=Ue,b=Me,j=Ne,re=$e,Q=Re,ze=We,L=je("motion");return n(),s("div",tt,[u("header",at,[u("div",lt,[o(r,{to:"/",class:"picker__back flex h-10 w-10 items-center justify-center rounded-full text-muted-foreground hover:bg-muted hover:text-foreground transition-colors"},{default:d(()=>[o(e(Se),{class:"h-5 w-5"})]),_:1}),u("h1",nt,c(e(i)("randomPicker.title")),1),o(h,{tabs:[{value:"touch",label:e(i)("randomPicker.touch")},{value:"list",label:e(i)("randomPicker.list")}],"model-value":e(U),class:"picker__mode-switch","onUpdate:modelValue":t[0]||(t[0]=a=>Te(a))},null,8,["tabs","model-value"])])]),e(U)==="touch"?(n(),s("div",ot,[u("div",{class:"touch-area absolute inset-0 touch-none select-none",onTouchstart:he,onTouchmove:ye,onTouchend:ee,onTouchcancel:ee},[e(m).length===0?(n(),s("p",st,c(e(i)("randomPicker.touchHint")),1)):_("",!0),(n(!0),s(V,null,A(e(m),a=>(n(),s("div",{key:a.id,class:S(["touch-point absolute w-20 h-20 rounded-full -translate-x-1/2 -translate-y-1/2 transition-all duration-300 pointer-events-none",{"scale-150 shadow-2xl z-10":e(k)?.id===a.id,"opacity-30 scale-75":e(k)&&e(k).id!==a.id}]),style:q({left:`${a.x}px`,top:`${a.y}px`,backgroundColor:a.color})},null,6))),128))],32),e(m).length>=W&&!e(M)?(n(),s("p",it,c(e(i)("randomPicker.holdStill")),1)):_("",!0)])):(n(),s("div",rt,[o(h,{tabs:[{value:"player",label:e(i)("randomPicker.drawPlayer")},{value:"team",label:e(i)("randomPicker.drawTeam")}],"model-value":e(z),class:"list-zone__draw-modes","onUpdate:modelValue":t[1]||(t[1]=a=>{z.value=a,Ie()})},null,8,["tabs","model-value"]),u("div",ct,[o(ie,{modelValue:e($),"onUpdate:modelValue":t[2]||(t[2]=a=>me($)?$.value=a:null),placeholder:e(i)("randomPicker.playerName"),class:"list-zone__input flex-1",onKeyup:de(ae,["enter"])},null,8,["modelValue","placeholder"]),o(b,{onClick:ae},{default:d(()=>[o(e(ce),{class:"h-4 w-4"}),p(" "+c(e(i)("common.add")),1)]),_:1})]),e(f).length>0?(n(),s("div",ut,[o(b,{variant:"outline",size:"sm",onClick:t[3]||(t[3]=a=>le(!0))},{default:d(()=>[o(e(Ke),{class:"h-4 w-4"}),p(" "+c(e(i)("randomPicker.selectAll")),1)]),_:1}),o(b,{variant:"outline",size:"sm",onClick:t[4]||(t[4]=a=>le(!1))},{default:d(()=>[o(e(Xe),{class:"h-4 w-4"}),p(" "+c(e(i)("randomPicker.deselectAll")),1)]),_:1}),o(b,{variant:"outline",size:"sm",class:S(["toolbar-btn--teams ml-auto",{"bg-primary text-primary-foreground":e(R)}]),onClick:t[5]||(t[5]=a=>R.value=!e(R))},{default:d(()=>[o(e(Ye),{class:"h-4 w-4"}),p(" "+c(e(i)("randomPicker.manageTeams")),1)]),_:1},8,["class"])])):_("",!0),e(R)?N((n(),P(Q,{key:1,initial:{opacity:0,height:0},enter:{opacity:1,height:"auto"},class:"team-manager p-4 space-y-4"},{default:d(()=>[u("h3",dt,c(e(i)("randomPicker.teams")),1),u("div",mt,[o(ie,{modelValue:e(B),"onUpdate:modelValue":t[6]||(t[6]=a=>me(B)?B.value=a:null),placeholder:e(i)("randomPicker.teamName"),class:"flex-1",onKeyup:de(ne,["enter"])},null,8,["modelValue","placeholder"]),o(b,{size:"sm",onClick:ne},{default:d(()=>[o(e(ce),{class:"h-4 w-4"})]),_:1})]),e(x).length>0?(n(),s("div",ft,[(n(!0),s(V,null,A(e(x),a=>(n(),s("div",{key:a.id,class:"team-item bg-muted rounded-lg p-3"},[u("div",_t,[u("span",{class:"w-3 h-3 rounded-full",style:q({backgroundColor:a.color})},null,4),u("span",vt,c(a.name),1),o(j,{variant:"secondary"},{default:d(()=>[p(c(J(a.id).length),1)]),_:2},1024),o(re,{variant:"destructive",size:"sm",onClick:y=>we(a.id)},{default:d(()=>[o(e(ue),{class:"h-4 w-4"})]),_:1},8,["onClick"])]),J(a.id).length>0?(n(),s("div",pt,[(n(!0),s(V,null,A(J(a.id),y=>(n(),P(j,{key:y.id,variant:y.isActive?"default":"secondary",class:S({"opacity-50 line-through":!y.isActive})},{default:d(()=>[p(c(y.name),1)]),_:2},1032,["variant","class"]))),128))])):_("",!0)]))),128))])):_("",!0),e(Z).length>0?(n(),s("div",ht,[u("p",yt,c(e(i)("randomPicker.unassigned")),1),u("div",gt,[(n(!0),s(V,null,A(e(Z),a=>(n(),P(j,{key:a.id,variant:"outline",class:S({"opacity-50":!a.isActive})},{default:d(()=>[p(c(a.name),1)]),_:2},1032,["class"]))),128))])])):_("",!0)]),_:1})),[[L]]):_("",!0),e(f).length>0?(n(),s("div",kt,[(n(!0),s(V,null,A(e(f),(a,y)=>N((n(),P(Q,{key:a.id,initial:{opacity:0,x:-20},enter:{opacity:1,x:0,transition:{delay:y*30}},class:S(["player-list__item p-3",{"ring-2 ring-primary bg-primary/10":e(C)===a.name,"opacity-50":!a.isActive}])},{default:d(()=>[u("div",xt,[o(ze,{"model-value":a.isActive,class:"player-list__toggle","onUpdate:modelValue":I=>be(a.id)},null,8,["model-value","onUpdate:modelValue"]),u("span",bt,c(a.name),1),a.teamId?(n(),P(j,{key:0,class:"player-list__team-badge",style:q({backgroundColor:se(a.teamId)?.color})},{default:d(()=>[p(c(se(a.teamId)?.name),1)]),_:2},1032,["style"])):_("",!0),u("div",wt,[e(x).length>0?(n(),P(b,{key:0,variant:"ghost",size:"sm",class:"player-list__assign text-xs",onClick:I=>D.value=e(D)===a.id?null:a.id},{default:d(()=>[p(c(a.teamId?e(i)("randomPicker.reassign"):e(i)("randomPicker.assign")),1)]),_:2},1032,["onClick"])):_("",!0),o(re,{variant:"destructive",size:"sm",onClick:I=>xe(a.id)},{default:d(()=>[o(e(ue),{class:"h-4 w-4"})]),_:1},8,["onClick"])])]),e(D)===a.id?(n(),s("div",Pt,[(n(!0),s(V,null,A(e(x),I=>(n(),P(b,{key:I.id,variant:"outline",size:"sm",style:q({borderColor:I.color}),onClick:Lt=>oe(a.id,I.id)},{default:d(()=>[p(c(I.name),1)]),_:2},1032,["style","onClick"]))),128)),a.teamId?(n(),P(b,{key:0,variant:"ghost",size:"sm",onClick:I=>oe(a.id,null)},{default:d(()=>[p(c(e(i)("randomPicker.noTeam")),1)]),_:1},8,["onClick"])):_("",!0)])):_("",!0)]),_:2},1032,["enter","class"])),[[L]])),128))])):(n(),s("p",Ct,c(e(i)("randomPicker.noPlayers")),1)),e(f).length>=2?(n(),s("div",Tt,[o(b,{disabled:e(w)||!e(E),class:"list-zone__pick-btn w-full",onClick:Pe},{default:d(()=>[o(e(Be),{class:"h-4 w-4"}),p(" "+c(e(w)?e(i)("randomPicker.picking"):e(i)("randomPicker.pickRandom")),1)]),_:1},8,["disabled"]),o(b,{variant:"outline",disabled:e(w)||!e(E),class:"list-zone__order-btn w-full",onClick:Ce},{default:d(()=>[o(e(Fe),{class:"h-4 w-4"}),p(" "+c(e(i)("randomPicker.turnOrder")),1)]),_:1},8,["disabled"])])):_("",!0),e(C)&&!e(w)&&e(T).length===0?N((n(),s("div",It,[u("p",zt,c(e(C)),1)])),[[L]]):_("",!0),e(T).length>0&&!e(w)?N((n(),P(Q,{key:6,initial:{opacity:0,y:20},enter:{opacity:1,y:0},class:"list-zone__turn-order p-4"},{default:d(()=>[u("h3",Vt,c(e(i)("randomPicker.turnOrderResult")),1),u("ol",At,[(n(!0),s(V,null,A(e(T),(a,y)=>N((n(),s("li",{key:y,initial:{opacity:0,x:-20},enter:{opacity:1,x:0,transition:{delay:y*100}},class:"turn-order__item flex items-center gap-4 p-3 bg-muted rounded-lg"},[u("span",Ut,c(y+1),1),u("span",Mt,c(a),1)],8,St)),[[L]])),128))])]),_:1})),[[L]]):_("",!0)]))])}}}),Ft=qe(Bt,[["__scopeId","data-v-49023813"]]);export{Ft as default};
